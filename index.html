<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0e27">
    <meta name="description" content="ÿ®ÿßÿ≤€å ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿ±€åÿßÿ∂€å - ŸÖŸàÿ¥⁄© ŸÅÿ∂ÿß€å€å">
    <title>üöÄ ÿ®ÿßÿ≤€å ŸÖŸàÿ¥⁄© ÿ±€åÿßÿ∂€å</title>
    <style>
        /* ========== RESET Ÿà ÿ™ŸÜÿ∏€åŸÖÿßÿ™ Ÿæÿß€åŸá ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0a0e27 !important;
            background: linear-gradient(180deg, #0a0e27 0%, #1a1f3a 50%, #2a1f3a 100%) !important;
            position: fixed;
            top: 0;
            left: 0;
        }
        
        /* ========== ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å ========== */
        .hidden {
            display: none !important;
        }
        
        /* ========== ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåŸáÿß Ÿà ŸÅÿ∂ÿß ========== */
        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 0;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .space-object {
            position: absolute;
            font-size: clamp(20px, 4vw, 30px);
            animation: floatSpace 15s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes floatSpace {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(30px, -30px) rotate(90deg); }
            50% { transform: translate(-20px, 20px) rotate(180deg); }
            75% { transform: translate(20px, 30px) rotate(270deg); }
        }
        
        .shooting-star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px white;
            animation: shootingStar 3s linear;
        }
        
        @keyframes shootingStar {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: translate(-300px, 300px);
                opacity: 0;
            }
        }
        
        /* ========== ÿµŸÅÿ≠Ÿá ŸÖŸÜŸà€å ÿßÿµŸÑ€å ========== */
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .menu-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 40px);
            max-width: 700px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .game-logo {
            font-size: clamp(32px, 8vw, 52px);
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .game-subtitle {
            font-size: clamp(14px, 3.5vw, 18px);
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .rocket-animation {
            font-size: clamp(50px, 12vw, 80px);
            margin: 15px 0;
            animation: floatRocket 3s ease-in-out infinite;
            display: inline-block;
        }
        
        @keyframes floatRocket {
            0%, 100% { transform: translateY(0px) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        /* ========== ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÖŸÜŸà€å ÿßÿµŸÑ€å ========== */
        .main-menu-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }
        
        .menu-btn {
            background: white;
            border: 3px solid #3498db;
            padding: clamp(15px, 4vw, 20px);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: clamp(13px, 3vw, 16px);
            font-weight: bold;
            color: #2c3e50;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
        }
        
        .menu-btn:active {
            transform: translateY(0);
        }
        
        .menu-btn-icon {
            font-size: clamp(28px, 7vw, 40px);
        }
        
        .menu-btn-title {
            font-size: clamp(14px, 3.5vw, 18px);
        }
        
        .menu-btn.primary {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
        }
        
        .menu-btn.success {
            border-color: #2ecc71;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
        
        .menu-btn.warning {
            border-color: #f39c12;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        }
        
        .menu-btn.info {
            border-color: #3498db;
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
        }
        
        /* ========== ŸÜŸÖÿß€åÿ¥ ÿ≥⁄©Ÿá Ÿà ÿ¢ŸÖÿßÿ± ÿØÿ± ŸÖŸÜŸà ========== */
        .menu-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 15px;
            gap: 10px;
        }
        
        .menu-stat-item {
            text-align: center;
            flex: 1;
        }
        
        .menu-stat-icon {
            font-size: clamp(20px, 5vw, 28px);
            margin-bottom: 5px;
        }
        
        .menu-stat-value {
            font-size: clamp(16px, 4vw, 22px);
            font-weight: bold;
            color: #3498db;
        }
        
        .menu-stat-label {
            font-size: clamp(10px, 2.5vw, 12px);
            color: #7f8c8d;
            margin-top: 3px;
        }
        /* ========== ÿµŸÅÿ≠Ÿá ÿßŸÜÿ™ÿÆÿßÿ® ÿ≥ÿ∑ÿ≠ ========== */
        .level-select-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .level-select-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 700px;
            width: 100%;
            animation: slideIn 0.4s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .screen-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }
        
        .back-button {
            background: #e74c3c;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-button:hover {
            background: #c0392b;
            transform: scale(1.05);
        }
        
        .back-button:active {
            transform: scale(0.95);
        }
        
        .screen-title {
            font-size: clamp(20px, 5vw, 28px);
            font-weight: bold;
            color: #2c3e50;
            flex: 1;
        }
        
        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .level-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            position: relative;
        }
        
        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .level-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .level-card.locked::after {
            content: 'üîí';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
        }
        
        .level-card-icon {
            font-size: clamp(35px, 8vw, 50px);
            margin-bottom: 10px;
        }
        
        .level-card-name {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .level-card-desc {
            font-size: clamp(11px, 2.5vw, 13px);
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .level-card-reward {
            background: #ffd700;
            color: #2c3e50;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: clamp(11px, 2.5vw, 13px);
            font-weight: bold;
            display: inline-block;
        }
        
        .level-card.normal {
            border-color: #3498db;
        }
        
        .level-card.night {
            border-color: #34495e;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
        }
        
        .level-card.night .level-card-name,
        .level-card.night .level-card-desc {
            color: white;
        }
        
        .level-card.challenge {
            border-color: #e74c3c;
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        }
        
        .level-card.timed {
            border-color: #f39c12;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        }
        
        .level-card.infinite {
            border-color: #2ecc71;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
        
        .level-card.hell {
            border-color: #8b0000;
            background: linear-gradient(135deg, #1a0000 0%, #8b0000 100%);
            color: white;
        }
        
        .level-card.hell .level-card-name,
        .level-card.hell .level-card-desc {
            color: white;
        }
        
        /* ========== ÿµŸÅÿ≠Ÿá ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ ========== */
        .settings-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .settings-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 700px;
            width: 100%;
        }
        
        .settings-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }
        
        .settings-section-title {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }
        
        .checkbox-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            user-select: none;
        }
        
        .checkbox-item:hover {
            border-color: #3498db;
            box-shadow: 0 3px 10px rgba(52, 152, 219, 0.2);
        }
        
        .checkbox-item.checked {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
        }
        
        .checkbox-item.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .checkbox-icon {
            font-size: clamp(24px, 6vw, 32px);
            margin-bottom: 8px;
        }
        
        .checkbox-label {
            font-size: clamp(12px, 3vw, 15px);
            font-weight: bold;
        }
        
        .checkbox-price {
            font-size: clamp(10px, 2.5vw, 12px);
            margin-top: 5px;
            opacity: 0.8;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .radio-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .radio-item:hover {
            border-color: #3498db;
        }
        
        .radio-item.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        .radio-circle {
            width: 24px;
            height: 24px;
            border: 3px solid #e0e0e0;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .radio-item.selected .radio-circle {
            border-color: #667eea;
            background: #667eea;
            box-shadow: inset 0 0 0 4px white;
        }
        
        .radio-content {
            flex: 1;
        }
        
        .radio-title {
            font-size: clamp(13px, 3.5vw, 16px);
            font-weight: bold;
            color: #2c3e50;
        }
        
        .radio-desc {
            font-size: clamp(11px, 2.5vw, 13px);
            color: #7f8c8d;
            margin-top: 3px;
        }
        
        .save-button {
            width: 100%;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            border: none;
            padding: clamp(15px, 4vw, 18px);
            border-radius: 12px;
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
        }
        
        .save-button:active {
            transform: translateY(0);
        }
        /* ========== ÿµŸÅÿ≠Ÿá ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ========== */
        .shop-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .shop-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .shop-balance {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            padding: 15px 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .shop-balance-amount {
            font-size: clamp(24px, 6vw, 36px);
            font-weight: bold;
            color: #2c3e50;
        }
        
        .shop-balance-label {
            font-size: clamp(12px, 3vw, 14px);
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .shop-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .shop-tab {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: clamp(12px, 3vw, 15px);
            font-weight: bold;
            color: #7f8c8d;
        }
        
        .shop-tab:hover {
            border-color: #3498db;
        }
        
        .shop-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .shop-item {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            position: relative;
        }
        
        .shop-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .shop-item.owned {
            border-color: #2ecc71;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1) 0%, rgba(39, 174, 96, 0.1) 100%);
        }
        
        .shop-item.equipped {
            border-color: #3498db;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2) 0%, rgba(41, 128, 185, 0.2) 100%);
        }
        
        .shop-item.locked {
            opacity: 0.6;
        }
        
        .shop-item-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #2ecc71;
            color: white;
            padding: 3px 8px;
            border-radius: 8px;
            font-size: clamp(9px, 2vw, 11px);
            font-weight: bold;
        }
        
        .shop-item.equipped .shop-item-badge {
            background: #3498db;
        }
        
        .shop-item-icon {
            font-size: clamp(40px, 10vw, 60px);
            margin: 10px 0;
        }
        
        .shop-item-name {
            font-size: clamp(13px, 3vw, 16px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .shop-item-price {
            background: #ffd700;
            color: #2c3e50;
            padding: 6px 12px;
            border-radius: 10px;
            font-size: clamp(12px, 3vw, 14px);
            font-weight: bold;
            display: inline-block;
        }
        
        .shop-item.owned .shop-item-price {
            background: #2ecc71;
            color: white;
        }
        
        .shop-item-lock {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 20px;
        }
        
        /* ========== Modal ÿÆÿ±€åÿØ ========== */
        .purchase-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            padding: 20px;
        }
        
        .purchase-modal-content {
            background: white;
            border-radius: 20px;
            padding: clamp(25px, 6vw, 40px);
            max-width: 400px;
            width: 100%;
            text-align: center;
            animation: modalPop 0.3s ease;
        }
        
        @keyframes modalPop {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .purchase-modal-icon {
            font-size: clamp(60px, 15vw, 80px);
            margin-bottom: 15px;
        }
        
        .purchase-modal-title {
            font-size: clamp(20px, 5vw, 26px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .purchase-modal-desc {
            font-size: clamp(13px, 3vw, 15px);
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .purchase-modal-price {
            background: #ffd700;
            color: #2c3e50;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: clamp(18px, 4vw, 24px);
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .purchase-modal-buttons {
            display: flex;
            gap: 10px;
        }
        
        .purchase-btn {
            flex: 1;
            padding: clamp(12px, 3vw, 15px);
            border: none;
            border-radius: 12px;
            font-size: clamp(14px, 3.5vw, 16px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .purchase-btn.confirm {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }
        
        .purchase-btn.cancel {
            background: #e0e0e0;
            color: #7f8c8d;
        }
        
        .purchase-btn:hover {
            transform: translateY(-2px);
        }
        
        .purchase-btn:active {
            transform: translateY(0);
        }
        
        .purchase-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ========== ÿµŸÅÿ≠Ÿá ÿ¢ŸÖÿßÿ± ========== */
        .stats-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .stats-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 700px;
            width: 100%;
        }
        
        .stats-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .stats-card-title {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }
        
        .stat-box-icon {
            font-size: clamp(24px, 6vw, 32px);
            margin-bottom: 8px;
        }
        
        .stat-box-value {
            font-size: clamp(20px, 5vw, 28px);
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }
        
        .stat-box-label {
            font-size: clamp(11px, 2.5vw, 13px);
            color: #7f8c8d;
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: clamp(12px, 3vw, 14px);
        }
        /* ========== ÿµŸÅÿ≠Ÿá ŸÖÿØÿßŸÑ‚ÄåŸáÿß ========== */
        .medals-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .medals-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .medals-category {
            margin: 20px 0;
        }
        
        .medals-category-title {
            font-size: clamp(18px, 4.5vw, 24px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .medals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .medal-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }
        
        .medal-card.unlocked {
            border-color: #ffd700;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
            animation: medalGlow 2s ease-in-out infinite;
        }
        
        @keyframes medalGlow {
            0%, 100% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 8px 30px rgba(255, 215, 0, 0.6); }
        }
        
        .medal-card.locked {
            opacity: 0.4;
            filter: grayscale(100%);
        }
        
        .medal-card-icon {
            font-size: clamp(40px, 10vw, 60px);
            margin: 10px 0;
        }
        
        .medal-card-name {
            font-size: clamp(13px, 3vw, 16px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .medal-card-desc {
            font-size: clamp(11px, 2.5vw, 13px);
            color: #7f8c8d;
        }
        
        .medal-card.locked .medal-card-icon::after {
            content: 'üîí';
            position: absolute;
            font-size: 24px;
        }
        
        /* ========== ÿµŸÅÿ≠Ÿá ÿ¢ŸÖŸàÿ≤ÿ¥ ========== */
        .tutorial-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .tutorial-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: clamp(20px, 5vw, 35px);
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .tutorial-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .tutorial-tab {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: clamp(12px, 3vw, 15px);
            font-weight: bold;
        }
        
        .tutorial-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
        }
        
        .tutorial-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }
        
        .multiplication-table {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .table-item {
            background: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .table-item:hover {
            border-color: #3498db;
            transform: scale(1.05);
        }
        
        .table-item-question {
            font-size: clamp(12px, 3vw, 14px);
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .table-item-answer {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #3498db;
        }
        
        .tips-list {
            list-style: none;
            padding: 0;
        }
        
        .tip-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin: 10px 0;
            border-left: 5px solid #3498db;
        }
        
        .tip-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .tip-text {
            font-size: clamp(13px, 3vw, 15px);
            color: #2c3e50;
        }
        
        /* ========== ÿµŸÅÿ≠Ÿá ÿ®ÿßÿ≤€å ÿßÿµŸÑ€å ========== */
        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            z-index: 1;
            overflow: hidden;
        }
        
        .game-header {
            width: 100%;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            z-index: 10;
        }
        
        .game-back-btn {
            background: rgba(231, 76, 60, 0.9);
            backdrop-filter: blur(10px);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .game-back-btn:hover {
            background: rgba(192, 57, 43, 0.9);
            transform: scale(1.05);
        }
        
        .game-stats-bar {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 10px 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .game-stat {
            text-align: center;
            min-width: 60px;
        }
        
        .game-stat-label {
            font-size: clamp(10px, 2.5vw, 12px);
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 3px;
        }
        
        .game-stat-value {
            font-size: clamp(16px, 4vw, 22px);
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .game-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            overflow-y: auto;
        }
        
        .rocket-area {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: clamp(200px, 35vh, 400px);
            margin: 10px 0;
        }
        
        .space-objects {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .rocket {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(50px, 12vw, 80px);
            transition: bottom 0.5s ease;
            filter: drop-shadow(0 0 20px rgba(255, 100, 100, 0.6));
            z-index: 5;
        }
        
        .rocket-fire {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(35px, 9vw, 50px);
            animation: fireFlicker 0.1s infinite;
        }
        
        @keyframes fireFlicker {
            0%, 100% { 
                opacity: 1; 
                transform: translateX(-50%) scale(1);
            }
            50% { 
                opacity: 0.8; 
                transform: translateX(-50%) scale(1.15);
            }
        }
        
        .fuel-container {
            width: 100%;
            max-width: 550px;
            margin: 10px 0;
            padding: 0 10px;
        }
        
        .fuel-label {
            color: white;
            text-align: center;
            margin-bottom: 10px;
            font-size: clamp(14px, 3.5vw, 18px);
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .fuel-bar {
            width: 100%;
            height: clamp(35px, 7vw, 45px);
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            overflow: hidden;
            position: relative;
        }
        
        .fuel-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            transition: width 0.3s ease, background 0.3s ease;
            border-radius: 25px;
            box-shadow: 0 0 25px rgba(46, 204, 113, 0.6);
        }
        
        .fuel-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: clamp(13px, 3vw, 16px);
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8);
            z-index: 1;
        }
        
        .question-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: clamp(18px, 4vw, 28px);
            max-width: 550px;
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            margin: 10px;
        }
        
        .level-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: clamp(12px, 3vw, 14px);
            margin-bottom: 12px;
            color: white;
        }
        
        .question-text {
            font-size: clamp(32px, 8vw, 48px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 18px;
            direction: ltr;
            font-family: 'Courier New', monospace;
            letter-spacing: 3px;
        }
        
        .answer-input {
            width: 100%;
            padding: clamp(14px, 3.5vw, 18px);
            font-size: clamp(22px, 5.5vw, 28px);
            text-align: center;
            border: 3px solid #3498db;
            border-radius: 12px;
            margin-bottom: 15px;
            outline: none;
            direction: ltr;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .answer-input:focus {
            border-color: #2ecc71;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
            transform: scale(1.02);
        }
        
        .submit-button {
            width: 100%;
            max-width: 300px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: clamp(14px, 3.5vw, 18px);
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .submit-button:active {
            transform: translateY(0);
        }
        /* ========== ŸÅ€åÿØÿ®⁄© Ÿæÿßÿ≥ÿÆ ========== */
        .feedback-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(80px, 20vw, 140px);
            font-weight: bold;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            text-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s;
        }
        
        .feedback-overlay.show {
            opacity: 1;
            animation: feedbackBounce 0.6s ease;
        }
        
        @keyframes feedbackBounce {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) scale(1.2) rotate(10deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        }
        
        /* ========== ŸÜÿ¥ÿßŸÜ ⁄©ŸÖÿ®Ÿà ========== */
        .combo-badge {
            position: fixed;
            top: clamp(90px, 15vh, 130px);
            right: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: clamp(12px, 3vw, 18px) clamp(18px, 4vw, 28px);
            border-radius: 18px;
            font-size: clamp(20px, 5vw, 28px);
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 6px 25px rgba(245, 87, 108, 0.6);
            animation: comboBounce 0.5s ease;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }
        
        @keyframes comboBounce {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.15) rotate(-5deg); }
            75% { transform: scale(1.15) rotate(5deg); }
        }
        
        .combo-text {
            display: block;
            font-size: clamp(12px, 3vw, 14px);
            margin-top: 3px;
            opacity: 0.9;
        }
        
        /* ========== Modal Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å ========== */
        .game-over-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .game-over-content {
            background: white;
            border-radius: 25px;
            padding: clamp(25px, 6vw, 40px);
            max-width: 550px;
            width: 100%;
            text-align: center;
            animation: modalSlideUp 0.4s ease;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .game-over-icon {
            font-size: clamp(70px, 16vw, 100px);
            margin: 15px 0;
            animation: iconSpin 0.6s ease;
        }
        
        @keyframes iconSpin {
            0% { transform: rotate(0deg) scale(0); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .game-over-title {
            font-size: clamp(26px, 6vw, 36px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .game-over-subtitle {
            font-size: clamp(14px, 3.5vw, 18px);
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .new-medal-notification {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            animation: medalNotifPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes medalNotifPulse {
            0%, 100% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4); }
            50% { box-shadow: 0 8px 35px rgba(255, 215, 0, 0.7); }
        }
        
        .new-medal-text {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .new-medals-list {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .new-medal-item {
            font-size: clamp(32px, 8vw, 48px);
            animation: medalBounce 0.6s ease infinite;
        }
        
        @keyframes medalBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .final-stats-grid {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .final-stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 2px solid #e0e0e0;
            font-size: clamp(14px, 3.5vw, 18px);
        }
        
        .final-stat-row:last-child {
            border-bottom: none;
        }
        
        .final-stat-label {
            color: #7f8c8d;
            font-weight: 500;
        }
        
        .final-stat-value {
            color: #3498db;
            font-weight: bold;
        }
        
        .coin-reward {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #2c3e50;
            padding: 12px 20px;
            border-radius: 15px;
            font-size: clamp(18px, 4.5vw, 24px);
            font-weight: bold;
            display: inline-block;
            margin: 15px 0;
            animation: coinShine 1s ease-in-out infinite;
        }
        
        @keyframes coinShine {
            0%, 100% { box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 8px 25px rgba(255, 215, 0, 0.8); }
        }
        
        .game-over-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .game-over-btn {
            flex: 1;
            padding: clamp(14px, 3.5vw, 18px);
            border: none;
            border-radius: 12px;
            font-size: clamp(15px, 3.5vw, 18px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }
        
        .game-over-btn.restart {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .game-over-btn.menu {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }
        
        .game-over-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .game-over-btn:active {
            transform: translateY(0);
        }
        
        /* ========== Modal ÿØÿ±€åÿßŸÅÿ™ ŸÖÿØÿßŸÑ ========== */
        .medal-unlock-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: clamp(30px, 7vw, 50px);
            border-radius: 25px;
            text-align: center;
            z-index: 3000;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            width: 450px;
        }
        
        .medal-unlock-modal.show {
            animation: medalUnlockPop 0.6s ease forwards;
        }
        
        @keyframes medalUnlockPop {
            0% { 
                transform: translate(-50%, -50%) scale(0) rotate(-180deg);
                opacity: 0;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.15) rotate(10deg);
            }
            100% { 
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }
        
        .medal-unlock-icon {
            font-size: clamp(80px, 18vw, 120px);
            margin-bottom: 20px;
            animation: medalRotate 3s ease-in-out infinite;
        }
        
        @keyframes medalRotate {
            0%, 100% { transform: rotate(-15deg) scale(1); }
            50% { transform: rotate(15deg) scale(1.1); }
        }
        
        .medal-unlock-title {
            font-size: clamp(22px, 5.5vw, 32px);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 12px;
        }
        
        .medal-unlock-desc {
            font-size: clamp(14px, 3.5vw, 18px);
            color: #7f8c8d;
            margin-bottom: 25px;
        }
        
        .medal-unlock-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: clamp(12px, 3vw, 16px) clamp(25px, 6vw, 35px);
            font-size: clamp(15px, 3.5vw, 18px);
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .medal-unlock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* ========== ÿØ⁄©ŸÖŸá ÿµÿØÿß ========== */
        .sound-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 55px;
            height: 55px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(52, 152, 219, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 150;
            font-size: 24px;
        }
        
        .sound-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.4);
        }
        
        .sound-toggle:active {
            transform: scale(0.95);
        }
        
        .sound-toggle.muted {
            background: rgba(231, 76, 60, 0.9);
            border-color: rgba(192, 57, 43, 0.5);
            color: white;
        }
        
        /* ========== ŸÑŸàÿØ€åŸÜ⁄Ø ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #0a0e27 0%, #1a1f3a 50%, #2a1f3a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            flex-direction: column;
            gap: 20px;
        }
        
        .loading-rocket {
            font-size: clamp(60px, 15vw, 100px);
            animation: loadingBounce 1s ease-in-out infinite;
        }
        
        @keyframes loadingBounce {
            0%, 100% { transform: translateY(0) rotate(-10deg); }
            50% { transform: translateY(-30px) rotate(10deg); }
        }
        
        .loading-text {
            color: white;
            font-size: clamp(18px, 4vw, 24px);
            font-weight: bold;
        }
        
        .loading-bar {
            width: 200px;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .loading-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            animation: loadingProgress 1.5s ease-in-out infinite;
        }
        
        @keyframes loadingProgress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        /* ========== Media Queries ========== */
        @media (max-width: 768px) {
            .main-menu-buttons {
                grid-template-columns: 1fr;
            }
            
            .level-grid {
                grid-template-columns: 1fr;
            }
            
            .shop-items {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .medals-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .game-over-buttons {
                flex-direction: column;
            }
            
            .game-over-btn {
                width: 100%;
            }
            
            .combo-badge {
                top: 70px;
                right: 10px;
                padding: 10px 15px;
            }
        }
        
        @media (max-width: 480px) {
            .shop-items {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .menu-stats {
                flex-direction: column;
            }
            
            .game-stats-bar {
                justify-content: center;
            }
            
            .purchase-modal-buttons {
                flex-direction: column;
            }
        }
        
        @media (min-width: 1024px) {
            .menu-container,
            .level-select-container,
            .settings-container,
            .shop-container,
            .stats-container,
            .medals-container,
            .tutorial-container {
                max-width: 900px;
            }
            
            .rocket-area {
                max-width: 600px;
                height: 450px;
            }
        }
        
        @media (orientation: landscape) and (max-height: 600px) {
            .rocket-area {
                height: 180px;
            }
            
            .game-content {
                padding: 5px;
            }
            
            .fuel-container {
                margin: 5px 0;
            }
            
            .question-box {
                padding: 15px;
            }
        }
        
        /* ========== Scrollbar ÿ≥ŸÅÿßÿ±ÿ¥€å ========== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        
        /* ========== ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å ========== */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        .shake {
            animation: shake 0.5s ease;
        }
        
        /* ========== ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ⁄©ŸÖ⁄©€å ========== */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }
        .mt-10 { margin-top: 10px; }
        .mt-20 { margin-top: 20px; }
        .mb-10 { margin-bottom: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .no-select { user-select: none; }
        
    </style>
</head>
<body>
    <!-- ========== ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåŸáÿß€å Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ========== -->
    <div class="stars" id="starsContainer"></div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ŸÑŸàÿØ€åŸÜ⁄Ø ========== -->
    <div class="loading-screen hidden" id="loadingScreen">
        <div class="loading-rocket">üöÄ</div>
        <div class="loading-text">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</div>
        <div class="loading-bar">
            <div class="loading-bar-fill"></div>
        </div>
    </div>
    
    <!-- ========== ÿØ⁄©ŸÖŸá ÿµÿØÿß ========== -->
    <div class="sound-toggle" id="soundToggle" title="ÿµÿØÿß">
        üîä
    </div>
    
    <!-- ========== ŸÖŸÜŸà€å ÿßÿµŸÑ€å ========== -->
    <div class="main-menu" id="mainMenu">
        <div class="menu-container">
            <div class="game-logo">üöÄ ŸÖŸàÿ¥⁄© ÿ±€åÿßÿ∂€å</div>
            <div class="game-subtitle">ŸÖÿßÿ¨ÿ±ÿßÿ¨Ÿà€å€å ÿØÿ± ÿØŸÜ€åÿß€å ÿßÿπÿØÿßÿØ!</div>
            <div class="rocket-animation">üöÄ</div>
            
            <!-- ÿ¢ŸÖÿßÿ± ⁄©ÿßÿ±ÿ®ÿ± -->
            <div class="menu-stats">
                <div class="menu-stat-item">
                    <div class="menu-stat-icon">üí∞</div>
                    <div class="menu-stat-value" id="menuCoins">0</div>
                    <div class="menu-stat-label">ÿ≥⁄©Ÿá</div>
                </div>
                <div class="menu-stat-item">
                    <div class="menu-stat-icon">üèÜ</div>
                    <div class="menu-stat-value" id="menuHighscore">0</div>
                    <div class="menu-stat-label">ÿ±⁄©Ÿàÿ±ÿØ (ŸÖÿ™ÿ±)</div>
                </div>
                <div class="menu-stat-item">
                    <div class="menu-stat-icon">üèÖ</div>
                    <div class="menu-stat-value" id="menuMedals">0</div>
                    <div class="menu-stat-label">ŸÖÿØÿßŸÑ</div>
                </div>
            </div>
            
            <!-- ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÖŸÜŸà -->
            <div class="main-menu-buttons">
                <button class="menu-btn primary" onclick="showLevelSelect()">
                    <span class="menu-btn-icon">üéÆ</span>
                    <span class="menu-btn-title">ÿ¥ÿ±Ÿàÿπ ÿ®ÿßÿ≤€å</span>
                </button>
                
                <button class="menu-btn success" onclick="showSettings()">
                    <span class="menu-btn-icon">‚öôÔ∏è</span>
                    <span class="menu-btn-title">ÿ™ŸÜÿ∏€åŸÖÿßÿ™</span>
                </button>
                
                <button class="menu-btn warning" onclick="showShop()">
                    <span class="menu-btn-icon">üõí</span>
                    <span class="menu-btn-title">ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</span>
                </button>
                
                <button class="menu-btn info" onclick="showStats()">
                    <span class="menu-btn-icon">üìä</span>
                    <span class="menu-btn-title">ÿ¢ŸÖÿßÿ± ŸÖŸÜ</span>
                </button>
                
                <button class="menu-btn info" onclick="showMedals()">
                    <span class="menu-btn-icon">üèÜ</span>
                    <span class="menu-btn-title">ŸÖÿØÿßŸÑ‚ÄåŸáÿß</span>
                </button>
                
                <button class="menu-btn success" onclick="showTutorial()">
                    <span class="menu-btn-icon">üìö</span>
                    <span class="menu-btn-title">ÿ¢ŸÖŸàÿ≤ÿ¥</span>
                </button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 15px;">
                <p style="font-size: clamp(11px, 2.5vw, 13px); color: #7f8c8d;">
                    ŸÜÿ≥ÿÆŸá 1.0.0 | ÿ≥ÿßÿÆÿ™Ÿá ÿ¥ÿØŸá ÿ®ÿß ‚ù§Ô∏è
                </p>
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ÿßŸÜÿ™ÿÆÿßÿ® ÿ≥ÿ∑ÿ≠ ========== -->
    <div class="level-select-screen hidden" id="levelSelectScreen">
        <div class="level-select-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ÿßŸÜÿ™ÿÆÿßÿ® ÿ≥ÿ∑ÿ≠</h2>
            </div>
            
            <div class="level-grid" id="levelGrid">
                <!-- ÿ≥ÿ∑Ÿàÿ≠ ÿ®ÿß JavaScript ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸÜ -->
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ ========== -->
    <div class="settings-screen hidden" id="settingsScreen">
        <div class="settings-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≥ŸàÿßŸÑÿßÿ™</h2>
            </div>
            
            <!-- ÿßŸÜÿ™ÿÆÿßÿ® ÿπŸÖŸÑ€åÿßÿ™‚ÄåŸáÿß -->
            <div class="settings-section">
                <div class="settings-section-title">
                    <span>‚ûï</span>
                    ÿßŸÜÿ™ÿÆÿßÿ® ÿπŸÖŸÑ€åÿßÿ™‚ÄåŸáÿß
                </div>
                <div class="checkbox-group" id="operationsCheckbox">
                    <!-- ÿ®ÿß JavaScript Ÿæÿ± ŸÖ€å‚Äåÿ¥Ÿá -->
                </div>
            </div>
            
            <!-- ÿßŸÜÿ™ÿÆÿßÿ® ÿ≥ÿ∑ÿ≠ ÿ≥ÿÆÿ™€å -->
            <div class="settings-section">
                <div class="settings-section-title">
                    <span>üìä</span>
                    ÿ≥ÿ∑ÿ≠ ÿ≥ÿÆÿ™€å
                </div>
                <div class="radio-group" id="difficultyRadio">
                    <!-- ÿ®ÿß JavaScript Ÿæÿ± ŸÖ€å‚Äåÿ¥Ÿá -->
                </div>
            </div>
            
            <button class="save-button" onclick="saveSettings()">
                üíæ ÿ∞ÿÆ€åÿ±Ÿá Ÿà ÿ¥ÿ±Ÿàÿπ ÿ®ÿßÿ≤€å
            </button>
        </div>
    </div>
    <!-- ========== ÿµŸÅÿ≠Ÿá ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ========== -->
    <div class="shop-screen hidden" id="shopScreen">
        <div class="shop-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</h2>
            </div>
            
            <!-- ŸÖŸàÿ¨ŸàÿØ€å ÿ≥⁄©Ÿá -->
            <div class="shop-balance">
                <div class="shop-balance-amount">
                    üí∞ <span id="shopCoins">0</span>
                </div>
                <div class="shop-balance-label">ŸÖŸàÿ¨ŸàÿØ€å ÿ¥ŸÖÿß</div>
            </div>
            
            <!-- ÿ™ÿ®‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá -->
            <div class="shop-tabs">
                <button class="shop-tab active" onclick="switchShopTab('rockets')">üöÄ ŸÖŸàÿ¥⁄©‚ÄåŸáÿß</button>
                <button class="shop-tab" onclick="switchShopTab('backgrounds')">üåå Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá</button>
                <button class="shop-tab" onclick="switchShopTab('music')">üéµ ŸÖŸàÿ≤€å⁄©</button>
                <button class="shop-tab" onclick="switchShopTab('effects')">‚ú® ÿ¨ŸÑŸàŸá‚ÄåŸáÿß</button>
            </div>
            
            <!-- ÿ¢€åÿ™ŸÖ‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá -->
            <div class="shop-items" id="shopItems">
                <!-- ÿ®ÿß JavaScript Ÿæÿ± ŸÖ€å‚Äåÿ¥Ÿá -->
            </div>
        </div>
    </div>
    
    <!-- ========== Modal ÿÆÿ±€åÿØ ========== -->
    <div class="purchase-modal hidden" id="purchaseModal">
        <div class="purchase-modal-content">
            <div class="purchase-modal-icon" id="purchaseIcon">üöÄ</div>
            <div class="purchase-modal-title" id="purchaseTitle">ÿÆÿ±€åÿØ ÿ¢€åÿ™ŸÖ</div>
            <div class="purchase-modal-desc" id="purchaseDesc">ÿ¢€åÿß ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü</div>
            <div class="purchase-modal-price" id="purchasePrice">üí∞ 100</div>
            <div class="purchase-modal-buttons">
                <button class="purchase-btn confirm" id="confirmPurchaseBtn">‚úÖ ÿÆÿ±€åÿØ</button>
                <button class="purchase-btn cancel" onclick="closePurchaseModal()">‚ùå ÿßŸÜÿµÿ±ÿßŸÅ</button>
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ÿ¢ŸÖÿßÿ± ========== -->
    <div class="stats-screen hidden" id="statsScreen">
        <div class="stats-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ÿ¢ŸÖÿßÿ± ŸÖŸÜ</h2>
            </div>
            
            <!-- ÿ¢ŸÖÿßÿ± ⁄©ŸÑ€å -->
            <div class="stats-card">
                <div class="stats-card-title">
                    <span>üìà</span>
                    ÿ¢ŸÖÿßÿ± ⁄©ŸÑ€å
                </div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-box-icon">üéÆ</div>
                        <div class="stat-box-value" id="totalGames">0</div>
                        <div class="stat-box-label">ÿ®ÿßÿ≤€å ⁄©ŸÑ</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-icon">‚úÖ</div>
                        <div class="stat-box-value" id="totalCorrect">0</div>
                        <div class="stat-box-label">Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-icon">‚ùå</div>
                        <div class="stat-box-value" id="totalWrong">0</div>
                        <div class="stat-box-label">Ÿæÿßÿ≥ÿÆ ÿ∫ŸÑÿ∑</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-icon">üèÜ</div>
                        <div class="stat-box-value" id="bestAltitude">0</div>
                        <div class="stat-box-label">ÿ®Ÿáÿ™ÿ±€åŸÜ ÿßÿ±ÿ™ŸÅÿßÿπ</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-icon">üí∞</div>
                        <div class="stat-box-value" id="totalCoins">0</div>
                        <div class="stat-box-label">⁄©ŸÑ ÿ≥⁄©Ÿá</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-icon">üèÖ</div>
                        <div class="stat-box-value" id="totalMedalsCount">0</div>
                        <div class="stat-box-label">ŸÖÿØÿßŸÑ‚ÄåŸáÿß</div>
                    </div>
                </div>
            </div>
            
            <!-- ÿØÿ±ÿµÿØ ŸÖŸàŸÅŸÇ€åÿ™ -->
            <div class="stats-card">
                <div class="stats-card-title">
                    <span>üìä</span>
                    ÿØÿ±ÿµÿØ ŸÖŸàŸÅŸÇ€åÿ™
                </div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="successRate" style="width: 0%;">0%</div>
                </div>
            </div>
            
            <!-- ÿ±ÿ™ÿ®Ÿá -->
            <div class="stats-card">
                <div class="stats-card-title">
                    <span>üëë</span>
                    ÿ±ÿ™ÿ®Ÿá ÿ¥ŸÖÿß
                </div>
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: clamp(50px, 12vw, 80px);" id="rankIcon">ü•â</div>
                    <div style="font-size: clamp(20px, 5vw, 28px); font-weight: bold; color: #3498db; margin-top: 10px;" id="rankName">ŸÖÿ®ÿ™ÿØ€å</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ŸÖÿØÿßŸÑ‚ÄåŸáÿß ========== -->
    <div class="medals-screen hidden" id="medalsScreen">
        <div class="medals-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ŸÖÿØÿßŸÑ‚ÄåŸáÿß€å ŸÖŸÜ</h2>
            </div>
            
            <div id="medalsContent">
                <!-- ŸÖÿØÿßŸÑ‚ÄåŸáÿß ÿ®ÿß JavaScript ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸÜ -->
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ÿ¢ŸÖŸàÿ≤ÿ¥ ========== -->
    <div class="tutorial-screen hidden" id="tutorialScreen">
        <div class="tutorial-container">
            <div class="screen-header">
                <button class="back-button" onclick="showMainMenu()">‚Ü©Ô∏è</button>
                <h2 class="screen-title">ÿ¢ŸÖŸàÿ≤ÿ¥</h2>
            </div>
            
            <!-- ÿ™ÿ®‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥ -->
            <div class="tutorial-tabs">
                <button class="tutorial-tab active" onclick="switchTutorialTab('multiply')">‚úñÔ∏è ÿ¨ÿØŸàŸÑ ÿ∂ÿ±ÿ®</button>
                <button class="tutorial-tab" onclick="switchTutorialTab('tips')">üí° ŸÜ⁄©ÿßÿ™</button>
                <button class="tutorial-tab" onclick="switchTutorialTab('guide')">üìñ ÿ±ÿßŸáŸÜŸÖÿß</button>
            </div>
            
            <!-- ŸÖÿ≠ÿ™Ÿàÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥ -->
            <div class="tutorial-content" id="tutorialContent">
                <!-- ÿ®ÿß JavaScript Ÿæÿ± ŸÖ€å‚Äåÿ¥Ÿá -->
            </div>
        </div>
    </div>
    
    <!-- ========== ÿµŸÅÿ≠Ÿá ÿ®ÿßÿ≤€å ========== -->
    <div class="game-screen hidden" id="gameScreen">
        <!-- ŸáÿØÿ± ÿ®ÿßÿ≤€å -->
        <div class="game-header">
            <button class="game-back-btn" onclick="pauseGame()" title="ÿ™ŸàŸÇŸÅ">‚è∏Ô∏è</button>
            
            <div class="game-stats-bar">
                <div class="game-stat">
                    <div class="game-stat-label">ÿßŸÖÿ™€åÿßÿ≤</div>
                    <div class="game-stat-value" id="gameScore">0</div>
                </div>
                <div class="game-stat">
                    <div class="game-stat-label">ÿßÿ±ÿ™ŸÅÿßÿπ</div>
                    <div class="game-stat-value" id="gameAltitude">0</div>
                </div>
                <div class="game-stat">
                    <div class="game-stat-label">ÿ±⁄©Ÿàÿ±ÿØ</div>
                    <div class="game-stat-value" id="gameRecord">0</div>
                </div>
                <div class="game-stat">
                    <div class="game-stat-label">üí∞</div>
                    <div class="game-stat-value" id="gameCoins">0</div>
                </div>
            </div>
        </div>
        
        <!-- ŸÖÿ≠ÿ™Ÿàÿß€å ÿ®ÿßÿ≤€å -->
        <div class="game-content">
            <!-- ŸÖÿ≠ÿØŸàÿØŸá ŸÖŸàÿ¥⁄© -->
            <div class="rocket-area">
                <div class="space-objects" id="spaceObjects"></div>
                <div class="rocket" id="rocket">
                    üöÄ
                    <div class="rocket-fire">üî•</div>
                </div>
            </div>
            
            <!-- ŸÜŸàÿßÿ± ÿ≥ŸàÿÆÿ™ -->
            <div class="fuel-container">
                <div class="fuel-label">‚õΩ ÿ≥ŸàÿÆÿ™: <span id="fuelTime">20</span> ÿ´ÿßŸÜ€åŸá</div>
                <div class="fuel-bar">
                    <div class="fuel-fill" id="fuelFill" style="width: 100%;"></div>
                    <div class="fuel-text" id="fuelPercent">100%</div>
                </div>
            </div>
            
            <!-- ÿ®ÿß⁄©ÿ≥ ÿ≥ŸàÿßŸÑ -->
            <div class="question-box">
                <div class="level-badge" id="levelBadge">ÿπÿßÿØ€å üåü</div>
                <div class="question-text" id="questionText">8 √ó 7 = ?</div>
                <input 
                    type="number" 
                    class="answer-input" 
                    id="answerInput" 
                    placeholder="Ÿæÿßÿ≥ÿÆ"
                    inputmode="numeric"
                    autocomplete="off"
                />
                <button class="submit-button" onclick="submitAnswer()">
                    ‚úÖ ÿ´ÿ®ÿ™ Ÿæÿßÿ≥ÿÆ
                </button>
            </div>
        </div>
    </div>
    
    <!-- ========== ŸÅ€åÿØÿ®⁄© Ÿæÿßÿ≥ÿÆ ========== -->
    <div class="feedback-overlay" id="feedbackOverlay"></div>
    
    <!-- ========== ŸÜÿ¥ÿßŸÜ ⁄©ŸÖÿ®Ÿà ========== -->
    <div class="combo-badge hidden" id="comboBadge">
        <div>üî• ⁄©ŸÖÿ®Ÿà</div>
        <div class="combo-text" id="comboCount">5</div>
    </div>
    
    <!-- ========== Modal Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å ========== -->
    <div class="game-over-modal hidden" id="gameOverModal">
        <div class="game-over-content">
            <div class="game-over-icon" id="gameOverIcon">üéÆ</div>
            <div class="game-over-title" id="gameOverTitle">ÿ®ÿßÿ≤€å ÿ™ŸÖÿßŸÖ ÿ¥ÿØ!</div>
            <div class="game-over-subtitle" id="gameOverSubtitle">ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿÆŸàÿ®€å ÿØÿßÿ¥ÿ™€å!</div>
            
            <!-- ŸÖÿØÿßŸÑ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ -->
            <div class="new-medal-notification hidden" id="newMedalNotif">
                <div class="new-medal-text">üéâ ŸÖÿØÿßŸÑ ÿ¨ÿØ€åÿØ ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€å!</div>
                <div class="new-medals-list" id="newMedalsList"></div>
            </div>
            
            <!-- ÿ¢ŸÖÿßÿ± ŸÜŸáÿß€å€å -->
            <div class="final-stats-grid">
                <div class="final-stat-row">
                    <span class="final-stat-label">ÿßÿ±ÿ™ŸÅÿßÿπ ŸÜŸáÿß€å€å:</span>
                    <span class="final-stat-value" id="finalAltitude">0 ŸÖÿ™ÿ±</span>
                </div>
                <div class="final-stat-row">
                    <span class="final-stat-label">ÿßŸÖÿ™€åÿßÿ≤ ⁄©ŸÑ:</span>
                    <span class="final-stat-value" id="finalScore">0</span>
                </div>
                <div class="final-stat-row">
                    <span class="final-stat-label">Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™:</span>
                    <span class="final-stat-value" id="finalCorrect">0</span>
                </div>
                <div class="final-stat-row">
                    <span class="final-stat-label">Ÿæÿßÿ≥ÿÆ ÿ∫ŸÑÿ∑:</span>
                    <span class="final-stat-value" id="finalWrong">0</span>
                </div>
            </div>
            
            <!-- ŸæÿßÿØÿßÿ¥ ÿ≥⁄©Ÿá -->
            <div class="coin-reward" id="coinReward">
                üí∞ +50 ÿ≥⁄©Ÿá
            </div>
            
            <!-- ÿØ⁄©ŸÖŸá‚ÄåŸáÿß -->
            <div class="game-over-buttons">
                <button class="game-over-btn restart" onclick="restartGame()">
                    üîÑ ÿ®ÿßÿ≤€å ÿØŸàÿ®ÿßÿ±Ÿá
                </button>
                <button class="game-over-btn menu" onclick="backToMainMenu()">
                    üè† ŸÖŸÜŸà€å ÿßÿµŸÑ€å
                </button>
            </div>
        </div>
    </div>
    
    <!-- ========== Modal ÿØÿ±€åÿßŸÅÿ™ ŸÖÿØÿßŸÑ ========== -->
    <div class="medal-unlock-modal" id="medalUnlockModal">
        <div class="medal-unlock-icon" id="medalUnlockIcon">üèÜ</div>
        <div class="medal-unlock-title" id="medalUnlockTitle">ŸÖÿØÿßŸÑ ÿ¨ÿØ€åÿØ!</div>
        <div class="medal-unlock-desc" id="medalUnlockDesc">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ŸÖÿØÿßŸÑ</div>
        <button class="medal-unlock-btn" onclick="closeMedalUnlock()">
            ÿπÿßŸÑ€å! üéâ
        </button>
    </div>
    <script>
        // ========== ŸÖÿ™ÿ∫€åÿ±Ÿáÿß€å ÿßÿµŸÑ€å ÿ®ÿßÿ≤€å ==========
        let gameState = {
            score: 0,
            altitude: 0,
            coins: 0,
            fuel: 20,
            maxFuel: 20,
            currentLevel: 'normal',
            combo: 0,
            correctAnswers: 0,
            wrongAnswers: 0,
            totalGames: 0,
            bestAltitude: 0,
            isPlaying: false,
            currentQuestion: null,
            fuelTimer: null,
            soundEnabled: true
        };
        
        let userSettings = {
            operations: ['+', '-', '√ó', '√∑'],
            difficulty: 'medium',
            equippedRocket: 'üöÄ',
            equippedBackground: 'default',
            equippedMusic: 'default',
            equippedEffect: 'default'
        };
        
        let inventory = {
            rockets: ['üöÄ'],
            backgrounds: ['default'],
            music: ['default'],
            effects: ['default']
        };
        
        let unlockedMedals = [];
        let newMedalsThisGame = [];
        
        // ========== ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≥ÿ∑Ÿàÿ≠ ÿ®ÿßÿ≤€å ==========
        const gameLevels = {
            normal: {
                name: 'ÿπÿßÿØ€å',
                icon: 'üåü',
                desc: 'ÿ®ÿßÿ≤€å ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ',
                color: '#3498db',
                initialFuel: 25,
                fuelBonus: 20,
                fuelPenalty: 2,
                coinMultiplier: 1,
                locked: false,
                unlockCost: 0
            },
            night: {
                name: 'ÿ¥ÿ®',
                icon: 'üåô',
                desc: 'ŸÅÿ∂ÿß€å ÿ™ÿßÿ±€å⁄©‚Äåÿ™ÿ±',
                color: '#34495e',
                initialFuel: 20,
                fuelBonus: 18,
                fuelPenalty: 2,
                coinMultiplier: 1.5,
                locked: false,
                unlockCost: 0
            },
            challenge: {
                name: '⁄ÜÿßŸÑÿ¥',
                icon: '‚ö°',
                desc: 'ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿÆÿ™‚Äåÿ™ÿ±',
                color: '#e74c3c',
                initialFuel: 15,
                fuelBonus: 12,
                fuelPenalty: 4,
                coinMultiplier: 2,
                locked: false,
                unlockCost: 0
            },
            timed: {
                name: 'ÿ≤ŸÖÿßŸÜ‚ÄåÿØÿßÿ±',
                icon: '‚è±Ô∏è',
                desc: '2 ÿØŸÇ€åŸÇŸá ŸàŸÇÿ™ ÿØÿßÿ±€å',
                color: '#f39c12',
                initialFuel: 120,
                fuelBonus: 5,
                fuelPenalty: 10,
                coinMultiplier: 1.5,
                locked: false,
                unlockCost: 0
            },
            infinite: {
                name: 'ÿ™ŸÖÿ±€åŸÜ',
                icon: '‚ôæÔ∏è',
                desc: 'ÿ®ÿØŸàŸÜ ŸÖÿ≠ÿØŸàÿØ€åÿ™',
                color: '#2ecc71',
                initialFuel: 999,
                fuelBonus: 0,
                fuelPenalty: 0,
                coinMultiplier: 0,
                locked: false,
                unlockCost: 0
            },
            hell: {
                name: 'ÿ¨ŸáŸÜŸÖ€å',
                icon: 'üî•',
                desc: 'ÿ®ÿ±ÿß€å ŸÜÿßÿ®ÿ∫Ÿá‚ÄåŸáÿß!',
                color: '#8b0000',
                initialFuel: 10,
                fuelBonus: 8,
                fuelPenalty: 5,
                coinMultiplier: 3,
                locked: true,
                unlockCost: 1000
            }
        };
        
        // ========== ÿ≥ÿ∑Ÿàÿ≠ ÿ≥ÿÆÿ™€å ÿ≥ŸàÿßŸÑÿßÿ™ ==========
        const difficultyLevels = {
            veryEasy: {
                name: 'ÿÆ€åŸÑ€å ÿ¢ÿ≥ÿßŸÜ',
                icon: 'üü¢',
                desc: '€å⁄© ÿ±ŸÇŸÖ€å + €å⁄© ÿ±ŸÇŸÖ€å (3 + 5)',
                range: { min: 1, max: 9 },
                operations: ['+', '-'],
                locked: false,
                cost: 0
            },
            easy: {
                name: 'ÿ¢ÿ≥ÿßŸÜ',
                icon: 'üü°',
                desc: '€å⁄© ÿ±ŸÇŸÖ€å √ó €å⁄© ÿ±ŸÇŸÖ€å (4 √ó 7)',
                range: { min: 1, max: 9 },
                operations: ['+', '-', '√ó', '√∑'],
                locked: false,
                cost: 0
            },
            medium: {
                name: 'ŸÖÿ™Ÿàÿ≥ÿ∑',
                icon: 'üü†',
                desc: 'ÿØŸà ÿ±ŸÇŸÖ€å + €å⁄© ÿ±ŸÇŸÖ€å (23 + 8)',
                range: { min1: 10, max1: 99, min2: 1, max2: 9 },
                locked: false,
                cost: 100
            },
            hard: {
                name: 'ÿ≥ÿÆÿ™',
                icon: 'üî¥',
                desc: 'ÿØŸà ÿ±ŸÇŸÖ€å √ó €å⁄© ÿ±ŸÇŸÖ€å (45 √ó 9)',
                range: { min1: 10, max1: 99, min2: 1, max2: 9 },
                locked: true,
                cost: 300
            },
            veryHard: {
                name: 'ÿÆ€åŸÑ€å ÿ≥ÿÆÿ™',
                icon: 'üü£',
                desc: 'ÿØŸà ÿ±ŸÇŸÖ€å √ó ÿØŸà ÿ±ŸÇŸÖ€å (34 √ó 28)',
                range: { min: 10, max: 99 },
                locked: true,
                cost: 500
            },
            nightmare: {
                name: 'ÿ¨ŸáŸÜŸÖ€å',
                icon: '‚ö´',
                desc: 'ÿ≥Ÿá ÿ±ŸÇŸÖ€å √ó ÿØŸà ÿ±ŸÇŸÖ€å (123 √ó 45)',
                range: { min1: 100, max1: 999, min2: 10, max2: 99 },
                locked: true,
                cost: 1000
            }
        };
        
        // ========== ŸÖÿØÿßŸÑ‚ÄåŸáÿß ==========
        const medals = {
            bronze: [
                { id: 'first_flight', icon: 'üåü', name: 'ÿßŸàŸÑ€åŸÜ Ÿæÿ±Ÿàÿßÿ≤', desc: 'ÿßŸàŸÑ€åŸÜ ÿ®ÿßÿ≤€å', check: () => gameState.totalGames >= 1 },
                { id: 'fifty_meter', icon: 'üéØ', name: 'ŸæŸÜÿ¨ÿßŸá ŸÖÿ™ÿ±€å', desc: '50 ŸÖÿ™ÿ± ÿßÿ±ÿ™ŸÅÿßÿπ', check: () => gameState.altitude >= 50 },
                { id: 'ten_correct', icon: 'üî¢', name: 'ÿØŸá ÿ≥ŸàÿßŸÑ', desc: '10 Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™', check: () => gameState.correctAnswers >= 10 }
            ],
            silver: [
                { id: 'two_hundred', icon: 'üöÅ', name: 'ÿØŸà€åÿ≥ÿ™ ŸÖÿ™ÿ±€å', desc: '200 ŸÖÿ™ÿ± ÿßÿ±ÿ™ŸÅÿßÿπ', check: () => gameState.altitude >= 200 },
                { id: 'combo_5', icon: 'üî•', name: '⁄©ŸÖÿ®Ÿà 5', desc: '5 Ÿæÿßÿ≥ÿÆ Ÿæÿ¥ÿ™ ÿ≥ÿ± ŸáŸÖ', check: () => gameState.combo >= 5 },
                { id: 'speed', icon: '‚ö°', name: 'ÿ≥ÿ±ÿπÿ™', desc: '5 Ÿæÿßÿ≥ÿÆ ÿ≥ÿ±€åÿπ', check: () => false },
                { id: 'twenty_correct', icon: 'üíØ', name: 'ÿ®€åÿ≥ÿ™ ÿ≥ŸàÿßŸÑ', desc: '20 Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™', check: () => gameState.correctAnswers >= 20 },
                { id: 'first_buy', icon: 'üí∞', name: 'ÿßŸàŸÑ€åŸÜ ÿÆÿ±€åÿØ', desc: 'ÿÆÿ±€åÿØ ÿßŸàŸÑ€åŸÜ ÿ¢€åÿ™ŸÖ', check: () => inventory.rockets.length > 1 }
            ],
            gold: [
                { id: 'thousand_meter', icon: '‚úàÔ∏è', name: 'Ÿáÿ≤ÿßÿ± ŸÖÿ™ÿ±€å', desc: '1000 ŸÖÿ™ÿ± ÿßÿ±ÿ™ŸÅÿßÿπ', check: () => gameState.altitude >= 1000 },
                { id: 'combo_10', icon: '‚ö°', name: '⁄©ŸÖÿ®Ÿà 10', desc: '10 Ÿæÿßÿ≥ÿÆ ŸÖÿ™ŸàÿßŸÑ€å', check: () => gameState.combo >= 10 },
                { id: 'fifty_correct', icon: 'üíé', name: 'ŸæŸÜÿ¨ÿßŸá ÿ≥ŸàÿßŸÑ', desc: '50 Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™', check: () => gameState.correctAnswers >= 50 },
                { id: 'hard_level', icon: 'üòé', name: 'ÿ≥ÿ∑ÿ≠ ÿ≥ÿÆÿ™', desc: 'ÿ™ŸÖŸàŸÖ ⁄©ÿ±ÿØŸÜ ÿ≥ÿ∑ÿ≠ ÿ≥ÿÆÿ™', check: () => false },
                { id: 'perfect', icon: 'üéØ', name: 'ÿØŸÇÿ™ ÿ®ÿßŸÑÿß', desc: '10 ÿ≥ŸàÿßŸÑ ÿ®ÿØŸàŸÜ ÿ∫ŸÑÿ∑', check: () => gameState.correctAnswers >= 10 && gameState.wrongAnswers === 0 }
            ],
            diamond: [
                { id: 'two_thousand', icon: 'üõ∏', name: 'ÿØŸà Ÿáÿ≤ÿßÿ± ŸÖÿ™ÿ±€å', desc: '2000 ŸÖÿ™ÿ±', check: () => gameState.altitude >= 2000 },
                { id: 'combo_20', icon: 'üî•', name: '⁄©ŸÖÿ®Ÿà 20', desc: '20 Ÿæÿßÿ≥ÿÆ ŸÖÿ™ŸàÿßŸÑ€å', check: () => gameState.combo >= 20 },
                { id: 'expert_level', icon: 'üèÜ', name: 'ÿ≥ÿ∑ÿ≠ ÿßÿ≥ÿ™ÿßÿØ', desc: 'ÿ™ŸÖŸàŸÖ ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿßÿØ', check: () => false },
                { id: 'hundred_correct', icon: 'üßÆ', name: 'ÿµÿØ ÿ≥ŸàÿßŸÑ', desc: '100 Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™', check: () => gameState.correctAnswers >= 100 },
                { id: 'perfect_20', icon: 'üíØ', name: '⁄©ÿßŸÖŸÑ', desc: '20 ÿ≥ŸàÿßŸÑ ÿ®ÿØŸàŸÜ ÿ∫ŸÑÿ∑', check: () => gameState.correctAnswers >= 20 && gameState.wrongAnswers === 0 },
                { id: 'lightning', icon: '‚ö°', name: 'ÿ®ÿ±ŸÇ ÿ¢ÿ≥ÿß', desc: '10 Ÿæÿßÿ≥ÿÆ ÿÆ€åŸÑ€å ÿ≥ÿ±€åÿπ', check: () => false }
            ],
            legend: [
                { id: 'five_thousand', icon: 'üåü', name: 'ŸæŸÜÿ¨ Ÿáÿ≤ÿßÿ± ŸÖÿ™ÿ±€å', desc: '5000 ŸÖÿ™ÿ±', check: () => gameState.altitude >= 5000 },
                { id: 'combo_50', icon: 'üî•', name: '⁄©ŸÖÿ®Ÿà 50', desc: '50 Ÿæÿßÿ≥ÿÆ Ÿæÿ¥ÿ™ ÿ≥ÿ± ŸáŸÖ!', check: () => gameState.combo >= 50 },
                { id: 'math_king', icon: 'üëë', name: 'ŸæÿßÿØÿ¥ÿßŸá ÿ±€åÿßÿ∂€å', desc: '500 Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™', check: () => gameState.correctAnswers >= 500 },
                { id: 'rich', icon: 'üíé', name: 'ÿ´ÿ±Ÿàÿ™ŸÖŸÜÿØ', desc: '10000 ÿ≥⁄©Ÿá ÿ¨ŸÖÿπ ⁄©ŸÜ', check: () => gameState.coins >= 10000 }
            ]
        };
        
        // ========== ÿ¢€åÿ™ŸÖ‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ==========
        const shopItems = {
            rockets: [
                { id: 'rocket_classic', icon: 'üöÄ', name: 'ŸÖŸàÿ¥⁄© ⁄©ŸÑÿßÿ≥€å⁄©', price: 0, owned: true },
                { id: 'plane', icon: '‚úàÔ∏è', name: 'ŸáŸàÿßŸæ€åŸÖÿß', price: 300, owned: false },
                { id: 'ufo', icon: 'üõ∏', name: 'ÿ®ÿ¥ŸÇÿßÿ® Ÿæÿ±ŸÜÿØŸá', price: 600, owned: false },
                { id: 'helicopter', icon: 'üöÅ', name: 'ŸáŸÑ€å⁄©ŸàŸæÿ™ÿ±', price: 1000, owned: false },
                { id: 'eagle', icon: 'ü¶Ö', name: 'ÿπŸÇÿßÿ®', price: 1500, owned: false },
                { id: 'dragon', icon: 'üêâ', name: 'ÿß⁄òÿØŸáÿß', price: 3000, owned: false },
                { id: 'comet', icon: 'üåü', name: 'ÿ≥ÿ™ÿßÿ±Ÿá ÿØŸÜÿ®ÿßŸÑŸá‚ÄåÿØÿßÿ±', price: 5000, owned: false },
                { id: 'ufo_gold', icon: 'üëΩ', name: 'UFO ÿ∑ŸÑÿß€å€å', price: 10000, owned: false }
            ],
            backgrounds: [
                { id: 'bg_default', icon: 'üåå', name: 'ŸÅÿ∂ÿß€å ÿπÿßÿØ€å', price: 0, owned: true },
                { id: 'bg_night', icon: 'üåÉ', name: 'ÿ¥ÿ® ŸÖŸáÿ™ÿßÿ®€å', price: 400, owned: false },
                { id: 'bg_mars', icon: 'üåÖ', name: 'ÿ∫ÿ±Ÿàÿ® ŸÖÿ±€åÿÆ', price: 800, owned: false },
                { id: 'bg_rainbow', icon: 'üåà', name: '⁄©Ÿá⁄©ÿ¥ÿßŸÜ ÿ±ŸÜ⁄Ø€å', price: 1200, owned: false },
                { id: 'bg_storm', icon: '‚ö°', name: 'ÿ∑ŸàŸÅÿßŸÜ ÿ±ÿπÿØ Ÿà ÿ®ÿ±ŸÇ', price: 2000, owned: false },
                { id: 'bg_galaxy', icon: 'üå†', name: 'ÿ≥ŸÅÿ± ÿ®€åŸÜ ⁄©Ÿá⁄©ÿ¥ÿßŸÜ€å', price: 4000, owned: false }
            ],
            music: [
                { id: 'music_default', icon: 'üéº', name: 'ŸÖŸàÿ≤€å⁄© 1', price: 0, owned: true },
                { id: 'music_space', icon: 'üéµ', name: 'ŸÖŸàÿ≤€å⁄© ŸÅÿ∂ÿß€å€å', price: 500, owned: false },
                { id: 'music_electronic', icon: 'üé∂', name: 'ŸÖŸàÿ≤€å⁄© ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©', price: 800, owned: false },
                { id: 'music_epic', icon: 'üé∏', name: 'ŸÖŸàÿ≤€å⁄© ÿ≠ŸÖÿßÿ≥€å', price: 1500, owned: false }
            ],
            effects: [
                { id: 'effect_default', icon: '‚ú®', name: 'ÿ¨ŸÑŸàŸá ÿπÿßÿØ€å', price: 0, owned: true },
                { id: 'effect_gold', icon: '‚ú®', name: 'ÿ¨ÿ±ŸÇŸá ÿ∑ŸÑÿß€å€å', price: 700, owned: false },
                { id: 'effect_star', icon: 'üåü', name: 'ÿßŸÜŸÅÿ¨ÿßÿ± ÿ≥ÿ™ÿßÿ±Ÿá', price: 1000, owned: false },
                { id: 'effect_rainbow', icon: 'üî•', name: 'ÿ¢ÿ™ÿ¥ ÿ±ŸÜ⁄Ø€åŸÜ‚Äå⁄©ŸÖÿßŸÜ', price: 2000, owned: false }
            ]
        };
        // ========== ŸÖÿØ€åÿ±€åÿ™ LocalStorage ==========
        function saveGameData() {
            const saveData = {
                coins: gameState.coins,
                totalGames: gameState.totalGames,
                bestAltitude: gameState.bestAltitude,
                correctAnswers: gameState.correctAnswers,
                wrongAnswers: gameState.wrongAnswers,
                unlockedMedals: unlockedMedals,
                inventory: inventory,
                userSettings: userSettings,
                unlockedLevels: Object.keys(gameLevels).filter(key => !gameLevels[key].locked)
            };
            localStorage.setItem('rocketMathGame', JSON.stringify(saveData));
        }
        
        function loadGameData() {
            const saved = localStorage.getItem('rocketMathGame');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    gameState.coins = data.coins || 0;
                    gameState.totalGames = data.totalGames || 0;
                    gameState.bestAltitude = data.bestAltitude || 0;
                    gameState.correctAnswers = data.correctAnswers || 0;
                    gameState.wrongAnswers = data.wrongAnswers || 0;
                    unlockedMedals = data.unlockedMedals || [];
                    inventory = data.inventory || inventory;
                    userSettings = data.userSettings || userSettings;
                    
                    // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ÿ≥ÿ∑Ÿàÿ≠
                    if (data.unlockedLevels) {
                        data.unlockedLevels.forEach(level => {
                            if (gameLevels[level]) {
                                gameLevels[level].locked = false;
                            }
                        });
                    }
                    
                    // ÿ¢ŸæÿØ€åÿ™ ÿ¢€åÿ™ŸÖ‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá
                    Object.keys(shopItems).forEach(category => {
                        shopItems[category].forEach(item => {
                            if (inventory[category].includes(item.id)) {
                                item.owned = true;
                            }
                        });
                    });
                } catch (e) {
                    console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å:', e);
                }
            }
        }
        
        // ========== ÿ™Ÿàÿßÿ®ÿπ ŸÜÿßŸàÿ®ÿ±€å ==========
        function hideAllScreens() {
            document.querySelectorAll('.main-menu, .level-select-screen, .settings-screen, .shop-screen, .stats-screen, .medals-screen, .tutorial-screen, .game-screen').forEach(screen => {
                screen.classList.add('hidden');
            });
        }
        
        function showMainMenu() {
            hideAllScreens();
            document.getElementById('mainMenu').classList.remove('hidden');
            updateMainMenuStats();
        }
        
        function showLevelSelect() {
            hideAllScreens();
            document.getElementById('levelSelectScreen').classList.remove('hidden');
            renderLevelSelect();
        }
        
        function showSettings() {
            hideAllScreens();
            document.getElementById('settingsScreen').classList.remove('hidden');
            renderSettings();
        }
        
        function showShop() {
            hideAllScreens();
            document.getElementById('shopScreen').classList.remove('hidden');
            switchShopTab('rockets');
            updateShopBalance();
        }
        
        function showStats() {
            hideAllScreens();
            document.getElementById('statsScreen').classList.remove('hidden');
            renderStats();
        }
        
        function showMedals() {
            hideAllScreens();
            document.getElementById('medalsScreen').classList.remove('hidden');
            renderMedals();
        }
        
        function showTutorial() {
            hideAllScreens();
            document.getElementById('tutorialScreen').classList.remove('hidden');
            switchTutorialTab('multiply');
        }
        
        function backToMainMenu() {
            if (gameState.isPlaying) {
                if (gameState.fuelTimer) clearInterval(gameState.fuelTimer);
                gameState.isPlaying = false;
            }
            showMainMenu();
        }
        
        // ========== ÿ≥ÿßÿÆÿ™ ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåŸáÿß ==========
        function createStars() {
            const container = document.getElementById('starsContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
            
            // ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåŸáÿß€å ÿØŸÜÿ®ÿßŸÑŸá‚ÄåÿØÿßÿ±
            setInterval(() => {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.left = Math.random() * 100 + '%';
                shootingStar.style.top = Math.random() * 50 + '%';
                container.appendChild(shootingStar);
                setTimeout(() => shootingStar.remove(), 3000);
            }, 8000);
        }
        
        // ========== ÿßŸÑŸÖÿßŸÜ‚ÄåŸáÿß€å ŸÅÿ∂ÿß€å€å ==========
        function createSpaceObjects() {
            const container = document.getElementById('spaceObjects');
            container.innerHTML = '';
            
            const objects = ['ü™ê', 'üåç', 'üåô', '‚òÑÔ∏è', 'üõ∏', 'üëΩ', 'üåü', 'üí´', '‚≠ê'];
            const count = Math.min(8, objects.length);
            
            for (let i = 0; i < count; i++) {
                const obj = document.createElement('div');
                obj.className = 'space-object';
                obj.textContent = objects[Math.floor(Math.random() * objects.length)];
                obj.style.left = Math.random() * 85 + 5 + '%';
                obj.style.top = Math.random() * 70 + 10 + '%';
                obj.style.animationDelay = Math.random() * 5 + 's';
                obj.style.animationDuration = (12 + Math.random() * 8) + 's';
                container.appendChild(obj);
            }
        }
        
        // ========== ÿ¢ŸæÿØ€åÿ™ ÿ¢ŸÖÿßÿ± ŸÖŸÜŸà ==========
        function updateMainMenuStats() {
            document.getElementById('menuCoins').textContent = gameState.coins;
            document.getElementById('menuHighscore').textContent = gameState.bestAltitude;
            document.getElementById('menuMedals').textContent = unlockedMedals.length;
        }
        
        // ========== ÿ±ŸÜÿØÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ≥ÿ∑ÿ≠ ==========
        function renderLevelSelect() {
            const container = document.getElementById('levelGrid');
            container.innerHTML = '';
            
            Object.keys(gameLevels).forEach(key => {
                const level = gameLevels[key];
                const card = document.createElement('div');
                card.className = `level-card ${key}`;
                if (level.locked) card.classList.add('locked');
                
                card.innerHTML = `
                    <div class="level-card-icon">${level.icon}</div>
                    <div class="level-card-name">${level.name}</div>
                    <div class="level-card-desc">${level.desc}</div>
                    <div class="level-card-reward">ÿ≥⁄©Ÿá: ${level.coinMultiplier}√ó</div>
                `;
                
                card.onclick = () => {
                    if (level.locked) {
                        if (gameState.coins >= level.unlockCost) {
                            if (confirm(`ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ÿ≥ÿ∑ÿ≠ ${level.name} ÿ®ÿß ${level.unlockCost} ÿ≥⁄©Ÿáÿü`)) {
                                gameState.coins -= level.unlockCost;
                                level.locked = false;
                                saveGameData();
                                renderLevelSelect();
                                playSound('coin');
                            }
                        } else {
                            showFeedback('‚ùå', 'ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ŸÜÿØÿßÿ±€å!');
                        }
                    } else {
                        startGame(key);
                    }
                };
                
                container.appendChild(card);
            });
        }
        
        // ========== ÿ±ŸÜÿØÿ± ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ==========
        function renderSettings() {
            // ÿπŸÖŸÑ€åÿßÿ™‚ÄåŸáÿß
            const opsContainer = document.getElementById('operationsCheckbox');
            opsContainer.innerHTML = '';
            
            const operations = [
                { id: '+', icon: '‚ûï', label: 'ÿ¨ŸÖÿπ', price: 0, locked: false },
                { id: '-', icon: '‚ûñ', label: 'ÿ™ŸÅÿ±€åŸÇ', price: 0, locked: false },
                { id: '√ó', icon: '‚úñÔ∏è', label: 'ÿ∂ÿ±ÿ®', price: 0, locked: false },
                { id: '√∑', icon: '‚ûó', label: 'ÿ™ŸÇÿ≥€åŸÖ', price: 0, locked: false }
            ];
            
            operations.forEach(op => {
                const isChecked = userSettings.operations.includes(op.id);
                const div = document.createElement('div');
                div.className = `checkbox-item ${isChecked ? 'checked' : ''} ${op.locked ? 'locked' : ''}`;
                div.innerHTML = `
                    <div class="checkbox-icon">${op.icon}</div>
                    <div class="checkbox-label">${op.label}</div>
                `;
                
                div.onclick = () => {
                    if (!op.locked) {
                        if (isChecked) {
                            if (userSettings.operations.length > 1) {
                                userSettings.operations = userSettings.operations.filter(o => o !== op.id);
                                renderSettings();
                            }
                        } else {
                            userSettings.operations.push(op.id);
                            renderSettings();
                        }
                    }
                };
                
                opsContainer.appendChild(div);
            });
            
            // ÿ≥ÿÆÿ™€å
            const diffContainer = document.getElementById('difficultyRadio');
            diffContainer.innerHTML = '';
            
            Object.keys(difficultyLevels).forEach(key => {
                const diff = difficultyLevels[key];
                const isSelected = userSettings.difficulty === key;
                const div = document.createElement('div');
                div.className = `radio-item ${isSelected ? 'selected' : ''}`;
                
                div.innerHTML = `
                    <div class="radio-circle"></div>
                    <div class="radio-content">
                        <div class="radio-title">${diff.icon} ${diff.name}</div>
                        <div class="radio-desc">${diff.desc}</div>
                    </div>
                `;
                
                div.onclick = () => {
                    if (!diff.locked || gameState.coins >= diff.cost) {
                        if (diff.locked) {
                            if (confirm(`ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ÿ≥ÿ∑ÿ≠ ${diff.name} ÿ®ÿß ${diff.cost} ÿ≥⁄©Ÿáÿü`)) {
                                gameState.coins -= diff.cost;
                                diff.locked = false;
                                userSettings.difficulty = key;
                                saveGameData();
                                renderSettings();
                            }
                        } else {
                            userSettings.difficulty = key;
                            renderSettings();
                        }
                    }
                };
                
                diffContainer.appendChild(div);
            });
        }
        
        function saveSettings() {
            saveGameData();
            showFeedback('‚úÖ', 'ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ!');
            setTimeout(() => showLevelSelect(), 1000);
        }
        
        // ========== ÿ™Ÿàÿßÿ®ÿπ ÿµÿØÿß ==========
        const sounds = {
            correct: () => playBeep(800, 0.1, 'sine'),
            wrong: () => playBeep(200, 0.2, 'sawtooth'),
            coin: () => playBeep(1200, 0.1, 'sine'),
            medal: () => {
                playBeep(600, 0.1, 'sine');
                setTimeout(() => playBeep(800, 0.1, 'sine'), 100);
                setTimeout(() => playBeep(1000, 0.2, 'sine'), 200);
            }
        };
        
        function playBeep(frequency, duration, type = 'sine') {
            if (!gameState.soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log('ÿµÿØÿß Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸÜŸÖ€å‚Äåÿ¥ŸàÿØ');
            }
        }
        
        function playSound(soundName) {
            if (sounds[soundName]) {
                sounds[soundName]();
            }
        }
        
        // ========== ÿ™Ÿà⁄ØŸÑ ÿµÿØÿß ==========
        document.getElementById('soundToggle').onclick = function() {
            gameState.soundEnabled = !gameState.soundEnabled;
            this.textContent = gameState.soundEnabled ? 'üîä' : 'üîá';
            this.classList.toggle('muted');
            playSound('coin');
        };
        // ========== ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ==========
        let currentShopTab = 'rockets';
        let selectedShopItem = null;
        
        function switchShopTab(tab) {
            currentShopTab = tab;
            document.querySelectorAll('.shop-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderShopItems(tab);
        }
        
        function renderShopItems(category) {
            const container = document.getElementById('shopItems');
            container.innerHTML = '';
            
            const categoryMap = {
                'rockets': 'rockets',
                'backgrounds': 'backgrounds',
                'music': 'music',
                'effects': 'effects'
            };
            
            const items = shopItems[categoryMap[category]];
            
            items.forEach(item => {
                const isOwned = item.owned;
                const isEquipped = userSettings[`equipped${category === 'rockets' ? 'Rocket' : category.slice(0, -1).charAt(0).toUpperCase() + category.slice(1, -1)}`] === item.id;
                
                const card = document.createElement('div');
                card.className = `shop-item ${isOwned ? 'owned' : ''} ${isEquipped ? 'equipped' : ''} ${!isOwned && item.price > gameState.coins ? 'locked' : ''}`;
                
                let badge = '';
                if (isEquipped) badge = '<div class="shop-item-badge">ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá</div>';
                else if (isOwned) badge = '<div class="shop-item-badge">ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØŸá</div>';
                
                card.innerHTML = `
                    ${!isOwned ? '<div class="shop-item-lock">üîí</div>' : ''}
                    ${badge}
                    <div class="shop-item-icon">${item.icon}</div>
                    <div class="shop-item-name">${item.name}</div>
                    <div class="shop-item-price">${isOwned ? (isEquipped ? '‚úì ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá' : 'ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ') : 'üí∞ ' + item.price}</div>
                `;
                
                card.onclick = () => {
                    if (isOwned && !isEquipped) {
                        equipItem(category, item.id);
                        renderShopItems(category);
                        playSound('coin');
                    } else if (!isOwned) {
                        openPurchaseModal(item, category);
                    }
                };
                
                container.appendChild(card);
            });
        }
        
        function equipItem(category, itemId) {
            const settingKey = category === 'rockets' ? 'equippedRocket' : 
                              category === 'backgrounds' ? 'equippedBackground' :
                              category === 'music' ? 'equippedMusic' : 'equippedEffect';
            
            userSettings[settingKey] = itemId;
            saveGameData();
            showFeedback('‚úÖ', 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØ!');
        }
        
        function updateShopBalance() {
            document.getElementById('shopCoins').textContent = gameState.coins;
        }
        
        function openPurchaseModal(item, category) {
            if (gameState.coins < item.price) {
                showFeedback('‚ùå', 'ÿ≥⁄©Ÿá ⁄©ÿßŸÅ€å ŸÜÿØÿßÿ±€å!');
                return;
            }
            
            selectedShopItem = { item, category };
            document.getElementById('purchaseIcon').textContent = item.icon;
            document.getElementById('purchaseTitle').textContent = item.name;
            document.getElementById('purchaseDesc').textContent = `ÿ¢€åÿß ŸÖ€å‚ÄåÿÆŸàÿß€å ÿß€åŸÜ ÿ¢€åÿ™ŸÖ ÿ±Ÿà ÿ®ÿÆÿ±€åÿü`;
            document.getElementById('purchasePrice').textContent = `üí∞ ${item.price}`;
            document.getElementById('purchaseModal').classList.remove('hidden');
            
            document.getElementById('confirmPurchaseBtn').onclick = confirmPurchase;
        }
        
        function closePurchaseModal() {
            document.getElementById('purchaseModal').classList.add('hidden');
            selectedShopItem = null;
        }
        
        function confirmPurchase() {
            if (!selectedShopItem) return;
            
            const { item, category } = selectedShopItem;
            
            if (gameState.coins >= item.price) {
                gameState.coins -= item.price;
                item.owned = true;
                
                const categoryMap = {
                    'rockets': 'rockets',
                    'backgrounds': 'backgrounds',
                    'music': 'music',
                    'effects': 'effects'
                };
                
                inventory[categoryMap[category]].push(item.id);
                
                saveGameData();
                updateShopBalance();
                closePurchaseModal();
                renderShopItems(category);
                
                showFeedback('üéâ', 'ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ!');
                playSound('coin');
                
                checkMedals();
            }
        }
        
        // ========== ÿ¢ŸÖÿßÿ± ==========
        function renderStats() {
            document.getElementById('totalGames').textContent = gameState.totalGames;
            document.getElementById('totalCorrect').textContent = gameState.correctAnswers;
            document.getElementById('totalWrong').textContent = gameState.wrongAnswers;
            document.getElementById('bestAltitude').textContent = gameState.bestAltitude;
            document.getElementById('totalCoins').textContent = gameState.coins;
            document.getElementById('totalMedalsCount').textContent = unlockedMedals.length;
            
            const total = gameState.correctAnswers + gameState.wrongAnswers;
            const successRate = total > 0 ? Math.round((gameState.correctAnswers / total) * 100) : 0;
            
            document.getElementById('successRate').style.width = successRate + '%';
            document.getElementById('successRate').textContent = successRate + '%';
            
            updateRank();
        }
        
        function updateRank() {
            const altitude = gameState.bestAltitude;
            let rank = { icon: 'ü•â', name: 'ŸÖÿ®ÿ™ÿØ€å' };
            
            if (altitude >= 5000) rank = { icon: 'üëë', name: 'ÿßŸÅÿ≥ÿßŸÜŸá' };
            else if (altitude >= 3000) rank = { icon: 'üíé', name: 'ÿßÿ≥ÿ™ÿßÿØ' };
            else if (altitude >= 1500) rank = { icon: 'ü•á', name: 'ÿ≠ÿ±ŸÅŸá‚Äåÿß€å' };
            else if (altitude >= 500) rank = { icon: 'ü•à', name: 'ŸÖÿßŸáÿ±' };
            
            document.getElementById('rankIcon').textContent = rank.icon;
            document.getElementById('rankName').textContent = rank.name;
        }
        
        // ========== ŸÖÿØÿßŸÑ‚ÄåŸáÿß ==========
        function renderMedals() {
            const container = document.getElementById('medalsContent');
            container.innerHTML = '';
            
            const categories = [
                { key: 'bronze', name: 'ü•â ÿ®ÿ±ŸÜÿ≤', color: '#cd7f32' },
                { key: 'silver', name: 'ü•à ŸÜŸÇÿ±Ÿá', color: '#c0c0c0' },
                { key: 'gold', name: 'ü•á ÿ∑ŸÑÿß', color: '#ffd700' },
                { key: 'diamond', name: 'üíé ÿßŸÑŸÖÿßÿ≥', color: '#b9f2ff' },
                { key: 'legend', name: 'üëë ÿßŸÅÿ≥ÿßŸÜŸá', color: '#ff00ff' }
            ];
            
            categories.forEach(cat => {
                const section = document.createElement('div');
                section.className = 'medals-category';
                
                section.innerHTML = `
                    <div class="medals-category-title" style="border-right: 5px solid ${cat.color}">
                        ${cat.name}
                    </div>
                    <div class="medals-grid" id="medals-${cat.key}"></div>
                `;
                
                container.appendChild(section);
                
                const grid = document.getElementById(`medals-${cat.key}`);
                medals[cat.key].forEach(medal => {
                    const isUnlocked = unlockedMedals.includes(medal.id);
                    const card = document.createElement('div');
                    card.className = `medal-card ${isUnlocked ? 'unlocked' : 'locked'}`;
                    
                    card.innerHTML = `
                        <div class="medal-card-icon">${medal.icon}</div>
                        <div class="medal-card-name">${medal.name}</div>
                        <div class="medal-card-desc">${isUnlocked ? medal.desc : 'üîí ŸÖÿÆŸÅ€å'}</div>
                    `;
                    
                    grid.appendChild(card);
                });
            });
        }
        
        function checkMedals() {
            newMedalsThisGame = [];
            
            Object.keys(medals).forEach(category => {
                medals[category].forEach(medal => {
                    if (!unlockedMedals.includes(medal.id)) {
                        try {
                            if (medal.check()) {
                                unlockedMedals.push(medal.id);
                                newMedalsThisGame.push(medal);
                                showMedalUnlock(medal);
                                playSound('medal');
                            }
                        } catch (e) {
                            // Medal check failed, skip
                        }
                    }
                });
            });
            
            if (newMedalsThisGame.length > 0) {
                saveGameData();
            }
        }
        
        function showMedalUnlock(medal) {
            const modal = document.getElementById('medalUnlockModal');
            document.getElementById('medalUnlockIcon').textContent = medal.icon;
            document.getElementById('medalUnlockTitle').textContent = medal.name;
            document.getElementById('medalUnlockDesc').textContent = medal.desc;
            
            modal.classList.add('show');
            
            setTimeout(() => {
                modal.classList.remove('show');
            }, 3000);
        }
        
        function closeMedalUnlock() {
            document.getElementById('medalUnlockModal').classList.remove('show');
        }
        
        // ========== ÿ¢ŸÖŸàÿ≤ÿ¥ ==========
        let currentTutorialTab = 'multiply';
        
        function switchTutorialTab(tab) {
            currentTutorialTab = tab;
            document.querySelectorAll('.tutorial-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderTutorial(tab);
        }
        
        function renderTutorial(tab) {
            const container = document.getElementById('tutorialContent');
            
            if (tab === 'multiply') {
                let html = '<h3 style="text-align: center; margin-bottom: 20px;">ÿ¨ÿØŸàŸÑ ÿ∂ÿ±ÿ®</h3>';
                html += '<div class="multiplication-table">';
                
                for (let i = 1; i <= 10; i++) {
                    for (let j = 1; j <= 10; j++) {
                        html += `
                            <div class="table-item">
                                <div class="table-item-question">${i} √ó ${j}</div>
                                <div class="table-item-answer">${i * j}</div>
                            </div>
                        `;
                    }
                }
                
                html += '</div>';
                container.innerHTML = html;
            } else if (tab === 'tips') {
                container.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px;">üí° ŸÜ⁄©ÿßÿ™ ÿ±€åÿßÿ∂€å</h3>
                    <ul class="tips-list">
                        <li class="tip-item">
                            <span class="tip-icon">‚úñÔ∏è</span>
                            <span class="tip-text">ÿ®ÿ±ÿß€å ÿ∂ÿ±ÿ® ÿØÿ± 5: ÿπÿØÿØ ÿ±Ÿà ÿ∂ÿ±ÿ® 10 ⁄©ŸÜ Ÿà ÿ®ÿπÿØ ŸÜÿµŸÅÿ¥ ⁄©ŸÜ</span>
                        </li>
                        <li class="tip-item">
                            <span class="tip-icon">‚úñÔ∏è</span>
                            <span class="tip-text">ÿ®ÿ±ÿß€å ÿ∂ÿ±ÿ® ÿØÿ± 9: ÿπÿØÿØ ÿ±Ÿà ÿ∂ÿ±ÿ® 10 ⁄©ŸÜ Ÿà ÿ®ÿπÿØ ÿÆŸàÿØÿ¥ ÿ±Ÿà ÿßÿ≤ÿ¥ ⁄©ŸÖ ⁄©ŸÜ</span>
                        </li>
                        <li class="tip-item">
                            <span class="tip-icon">‚ûï</span>
                            <span class="tip-text">ÿ®ÿ±ÿß€å ÿ¨ŸÖÿπ ÿßÿπÿØÿßÿØ ŸÜÿ≤ÿØ€å⁄©: €å⁄©€å ÿ±Ÿà ⁄Øÿ±ÿØ ⁄©ŸÜ Ÿà ÿ™ŸÅÿßŸàÿ™ ÿ±Ÿà ÿßÿ∂ÿßŸÅŸá/⁄©ŸÖ ⁄©ŸÜ</span>
                        </li>
                        <li class="tip-item">
                            <span class="tip-icon">‚ûó</span>
                            <span class="tip-text">ÿ®ÿ±ÿß€å ÿ™ŸÇÿ≥€åŸÖ ÿ®ÿ± 2: ŸÜÿµŸÅ ⁄©ŸÜ. ÿ®ÿ±ÿß€å ÿ™ŸÇÿ≥€åŸÖ ÿ®ÿ± 4: ÿØŸà ÿ®ÿßÿ± ŸÜÿµŸÅ ⁄©ŸÜ</span>
                        </li>
                        <li class="tip-item">
                            <span class="tip-icon">‚ö°</span>
                            <span class="tip-text">ÿ™ŸÖÿ±€åŸÜ ÿ≤€åÿßÿØ ⁄©ŸÑ€åÿØ ŸÖŸàŸÅŸÇ€åÿ™Ÿá! Ÿáÿ± ÿ±Ÿàÿ≤ ⁄ÜŸÜÿØ ÿØŸÇ€åŸÇŸá ÿ™ŸÖÿ±€åŸÜ ⁄©ŸÜ</span>
                        </li>
                        <li class="tip-item">
                            <span class="tip-icon">üéØ</span>
                            <span class="tip-text">ÿßŸàŸÑ ÿµÿ≠ÿ™ÿå ÿ®ÿπÿØ ÿ≥ÿ±ÿπÿ™! ÿØŸÇÿ™ ŸÖŸáŸÖ‚Äåÿ™ÿ± ÿßÿ≤ ÿ™ŸÜÿØ ÿ®ŸàÿØŸÜ ÿßÿ≥ÿ™</span>
                        </li>
                    </ul>
                `;
            } else if (tab === 'guide') {
                container.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px;">üìñ ÿ±ÿßŸáŸÜŸÖÿß€å ÿ®ÿßÿ≤€å</h3>
                    <div style="background: white; padding: 20px; border-radius: 15px;">
                        <h4 style="color: #3498db; margin-bottom: 10px;">üéÆ ⁄Üÿ∑Ÿàÿ± ÿ®ÿßÿ≤€å ⁄©ŸÜŸÖÿü</h4>
                        <p style="margin-bottom: 15px;">1. €å⁄© ÿ≥ÿ∑ÿ≠ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ (ÿπÿßÿØ€åÿå ÿ¥ÿ®ÿå ⁄ÜÿßŸÑÿ¥ Ÿà...)</p>
                        <p style="margin-bottom: 15px;">2. ÿ®Ÿá ÿ≥ŸàÿßŸÑÿßÿ™ ÿ±€åÿßÿ∂€å Ÿæÿßÿ≥ÿÆ ÿ®ÿØŸá</p>
                        <p style="margin-bottom: 15px;">3. ÿ®ÿß Ÿáÿ± Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™ ÿ≥ŸàÿÆÿ™ ŸÖŸàÿ¥⁄© Ÿæÿ± ŸÖ€å‚Äåÿ¥Ÿá</p>
                        <p style="margin-bottom: 15px;">4. ÿ®ÿß Ÿæÿßÿ≥ÿÆ ÿ∫ŸÑÿ∑ ÿ∏ÿ±ŸÅ€åÿ™ ŸÖÿÆÿ≤ŸÜ ⁄©ŸÖ ŸÖ€åÿ¥Ÿá</p>
                        
                        <h4 style="color: #3498db; margin: 20px 0 10px;">üí∞ ÿ≥⁄©Ÿá ⁄Üÿ∑Ÿàÿ± ÿ®⁄Ø€åÿ±ŸÖÿü</h4>
                        <p style="margin-bottom: 15px;">- Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™: 5 ÿ≥⁄©Ÿá</p>
                        <p style="margin-bottom: 15px;">- Ÿæÿßÿ≥ÿÆ ÿ≥ÿ±€åÿπ: 10 ÿ≥⁄©Ÿá</p>
                        <p style="margin-bottom: 15px;">- ⁄©ŸÖÿ®Ÿà: ÿ®ŸàŸÜŸàÿ≥ ÿßÿ∂ÿßŸÅ€å</p>
                        <p style="margin-bottom: 15px;">- ÿ±⁄©Ÿàÿ±ÿØ ÿ¨ÿØ€åÿØ: 100 ÿ≥⁄©Ÿá</p>
                        
                        <h4 style="color: #3498db; margin: 20px 0 10px;">üèÜ ŸÖÿØÿßŸÑ‚ÄåŸáÿß</h4>
                        <p style="margin-bottom: 15px;">ÿ®ÿß ÿ±ÿ≥€åÿØŸÜ ÿ®Ÿá ÿßŸáÿØÿßŸÅ ŸÖÿÆÿ™ŸÑŸÅÿå ŸÖÿØÿßŸÑ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ ÿ®ÿßÿ≤ ŸÖ€å‚Äåÿ¥Ÿá!</p>
                        
                        <h4 style="color: #3498db; margin: 20px 0 10px;">‚öôÔ∏è ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≥ŸàÿßŸÑÿßÿ™</h4>
                        <p style="margin-bottom: 15px;">ŸÖ€å‚Äåÿ™ŸàŸÜ€å ŸÜŸàÿπ ÿπŸÖŸÑ€åÿßÿ™ Ÿà ÿ≥ÿÆÿ™€å ÿ≥ŸàÿßŸÑÿßÿ™ ÿ±Ÿà ÿÆŸàÿØÿ™ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€å</p>
                    </div>
                `;
            }
        }
        // ========== ÿ¥ÿ±Ÿàÿπ ÿ®ÿßÿ≤€å ==========
        function startGame(levelKey) {
            gameState.currentLevel = levelKey;
            const level = gameLevels[levelKey];
            
            // ÿ±€åÿ≥ÿ™ Ÿàÿ∂ÿπ€åÿ™ ÿ®ÿßÿ≤€å
            gameState.score = 0;
            gameState.altitude = 0;
            gameState.fuel = level.initialFuel;
            gameState.maxFuel = level.initialFuel;
            gameState.combo = 0;
            gameState.correctAnswers = 0;
            gameState.wrongAnswers = 0;
            gameState.isPlaying = true;
            newMedalsThisGame = [];
            
            // ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿ®ÿßÿ≤€å
            hideAllScreens();
            document.getElementById('gameScreen').classList.remove('hidden');
            
            // ÿ™ŸÜÿ∏€åŸÖ ŸÖŸàÿ¥⁄©
            const rocketIcon = shopItems.rockets.find(r => r.id === userSettings.equippedRocket)?.icon || 'üöÄ';
            document.getElementById('rocket').innerHTML = `
                ${rocketIcon}
                <div class="rocket-fire">üî•</div>
            `;
            
            // ÿ™ŸÜÿ∏€åŸÖ ÿ®ÿ¨ ÿ≥ÿ∑ÿ≠
            document.getElementById('levelBadge').textContent = level.name + ' ' + level.icon;
            document.getElementById('levelBadge').style.background = level.color;
            
            // ÿ¢ŸæÿØ€åÿ™ ÿ¢ŸÖÿßÿ±
            updateGameUI();
            
            // ÿ≥ÿßÿÆÿ™ ÿßŸÑŸÖÿßŸÜ‚ÄåŸáÿß€å ŸÅÿ∂ÿß€å€å
            createSpaceObjects();
            
            // ÿ¥ÿ±Ÿàÿπ ÿ™ÿß€åŸÖÿ±
            startFuelTimer();
            
            // ÿ≥ŸàÿßŸÑ ÿßŸàŸÑ
            generateQuestion();
            
            // ŸÅŸà⁄©Ÿàÿ≥ ÿ±Ÿà€å ÿß€åŸÜŸæŸàÿ™
            document.getElementById('answerInput').focus();
        }
        
        // ========== ÿ™ŸàŸÑ€åÿØ ÿ≥ŸàÿßŸÑ ==========
        function generateQuestion() {
            const operations = userSettings.operations;
            const operation = operations[Math.floor(Math.random() * operations.length)];
            const difficulty = difficultyLevels[userSettings.difficulty];
            
            let num1, num2, answer;
            
            if (userSettings.difficulty === 'veryEasy' || userSettings.difficulty === 'easy') {
                // €å⁄© ÿ±ŸÇŸÖ€å
                num1 = Math.floor(Math.random() * 9) + 1;
                num2 = Math.floor(Math.random() * 9) + 1;
                
                if (operation === '+') {
                    answer = num1 + num2;
                } else if (operation === '-') {
                    if (num1 < num2) [num1, num2] = [num2, num1];
                    answer = num1 - num2;
                } else if (operation === '√ó') {
                    answer = num1 * num2;
                } else if (operation === '√∑') {
                    answer = num1;
                    num1 = num1 * num2;
                }
            } else if (userSettings.difficulty === 'medium') {
                // ÿØŸà ÿ±ŸÇŸÖ€å + €å⁄© ÿ±ŸÇŸÖ€å
                num1 = Math.floor(Math.random() * 90) + 10;
                num2 = Math.floor(Math.random() * 9) + 1;
                
                if (operation === '+') {
                    answer = num1 + num2;
                } else if (operation === '-') {
                    answer = num1 - num2;
                } else if (operation === '√ó') {
                    answer = num1 * num2;
                } else if (operation === '√∑') {
                    answer = num2;
                    num1 = num1 * num2;
                    [num1, num2] = [num2, num1];
                }
            } else if (userSettings.difficulty === 'hard') {
                // ÿØŸà ÿ±ŸÇŸÖ€å √ó €å⁄© ÿ±ŸÇŸÖ€å
                num1 = Math.floor(Math.random() * 90) + 10;
                num2 = Math.floor(Math.random() * 9) + 1;
                
                if (operation === '+') {
                    answer = num1 + num2;
                } else if (operation === '-') {
                    answer = num1 - num2;
                } else if (operation === '√ó') {
                    answer = num1 * num2;
                } else if (operation === '√∑') {
                    answer = Math.floor(num1 / num2);
                    num1 = answer * num2;
                }
            } else {
                // ÿ≥ÿÆÿ™‚Äåÿ™ÿ±
                num1 = Math.floor(Math.random() * 90) + 10;
                num2 = Math.floor(Math.random() * 90) + 10;
                
                if (operation === '+') {
                    answer = num1 + num2;
                } else if (operation === '-') {
                    if (num1 < num2) [num1, num2] = [num2, num1];
                    answer = num1 - num2;
                } else if (operation === '√ó') {
                    answer = num1 * num2;
                } else if (operation === '√∑') {
                    answer = Math.floor(num1 / num2);
                    num1 = answer * num2;
                }
            }
            
            gameState.currentQuestion = { num1, num2, operation, answer };
            document.getElementById('questionText').textContent = `${num1} ${operation} ${num2} = ?`;
            document.getElementById('answerInput').value = '';
        }
        
        // ========== ÿ´ÿ®ÿ™ Ÿæÿßÿ≥ÿÆ ==========
        function submitAnswer() {
            const input = document.getElementById('answerInput');
            const userAnswer = parseInt(input.value);
            
            if (isNaN(userAnswer) || input.value === '') {
                input.classList.add('shake');
                setTimeout(() => input.classList.remove('shake'), 500);
                return;
            }
            
            const level = gameLevels[gameState.currentLevel];
            const isCorrect = userAnswer === gameState.currentQuestion.answer;
            
            if (isCorrect) {
                handleCorrectAnswer(level);
            } else {
                handleWrongAnswer(level);
            }
            
            checkMedals();
            updateGameUI();
            generateQuestion();
            
            setTimeout(() => {
                document.getElementById('answerInput').focus();
            }, 100);
        }
        
        // ========== Ÿæÿßÿ≥ÿÆ ÿØÿ±ÿ≥ÿ™ ==========
        function handleCorrectAnswer(level) {
            showFeedback('‚úÖ');
            playSound('correct');
            
            // ÿßŸÖÿ™€åÿßÿ≤
            const baseScore = 10;
            const comboBonus = gameState.combo * 2;
            gameState.score += baseScore + comboBonus;
            
            // ÿ≥⁄©Ÿá
            let coinReward = 5;
            if (gameState.combo >= 5) coinReward = 10;
            coinReward = Math.floor(coinReward * level.coinMultiplier);
            gameState.coins += coinReward;
            
            // ÿßÿ±ÿ™ŸÅÿßÿπ
            gameState.altitude += 100;
            updateRocketPosition();
            
            // ÿ≥ŸàÿÆÿ™
            gameState.fuel = Math.min(gameState.fuel + level.fuelBonus, gameState.maxFuel);
            
            // ⁄©ŸÖÿ®Ÿà
            gameState.combo++;
            gameState.correctAnswers++;
            
            if (gameState.combo >= 3) {
                showCombo();
            }
        }
        
        // ========== Ÿæÿßÿ≥ÿÆ ÿ∫ŸÑÿ∑ ==========
        function handleWrongAnswer(level) {
            showFeedback('‚ùå');
            playSound('wrong');
            
            // ⁄©ŸÖÿ®Ÿà ÿµŸÅÿ±
            gameState.combo = 0;
            hideCombo();
            
            // ⁄©ÿßŸáÿ¥ ÿ∏ÿ±ŸÅ€åÿ™
            gameState.maxFuel = Math.max(gameState.maxFuel - level.fuelPenalty, 5);
            gameState.fuel = Math.min(gameState.fuel, gameState.maxFuel);
            
            gameState.wrongAnswers++;
        }
        
        // ========== ÿ™ÿß€åŸÖÿ± ÿ≥ŸàÿÆÿ™ ==========
        function startFuelTimer() {
            if (gameState.fuelTimer) {
                clearInterval(gameState.fuelTimer);
            }
            
            gameState.fuelTimer = setInterval(() => {
                if (gameState.currentLevel === 'infinite') return;
                
                gameState.fuel--;
                updateGameUI();
                
                if (gameState.fuel <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        // ========== ÿ¢ŸæÿØ€åÿ™ ÿ±ÿßÿ®ÿ∑ ÿ®ÿßÿ≤€å ==========
        function updateGameUI() {
            document.getElementById('gameScore').textContent = gameState.score;
            document.getElementById('gameAltitude').textContent = gameState.altitude;
            document.getElementById('gameRecord').textContent = gameState.bestAltitude;
            document.getElementById('gameCoins').textContent = gameState.coins;
            document.getElementById('fuelTime').textContent = gameState.fuel;
            
            const fuelPercent = (gameState.fuel / gameState.maxFuel) * 100;
            const fuelFill = document.getElementById('fuelFill');
            fuelFill.style.width = fuelPercent + '%';
            document.getElementById('fuelPercent').textContent = Math.round(fuelPercent) + '%';
            
            // ÿ™ÿ∫€å€åÿ± ÿ±ŸÜ⁄Ø ÿ≥ŸàÿÆÿ™
            if (fuelPercent > 50) {
                fuelFill.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
            } else if (fuelPercent > 25) {
                fuelFill.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
            } else {
                fuelFill.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
            }
        }
        
        // ========== ŸÖŸàŸÇÿπ€åÿ™ ŸÖŸàÿ¥⁄© ==========
        function updateRocketPosition() {
            const rocket = document.getElementById('rocket');
            const container = document.querySelector('.rocket-area');
            const maxHeight = container.offsetHeight - 100;
            const newBottom = Math.min((gameState.altitude / 10), maxHeight);
            rocket.style.bottom = newBottom + 'px';
        }
        
        // ========== ŸÅ€åÿØÿ®⁄© ==========
        function showFeedback(emoji, text = '') {
            const feedback = document.getElementById('feedbackOverlay');
            const emojis = {
                '‚úÖ': ['‚úÖ', 'üéâ', 'üëè', '‚≠ê', 'üåü', 'üí´'],
                '‚ùå': ['‚ùå']
            };
            
            const randomEmoji = emoji === '‚úÖ' 
                ? emojis['‚úÖ'][Math.floor(Math.random() * emojis['‚úÖ'].length)]
                : emoji;
            
            feedback.textContent = randomEmoji;
            feedback.style.color = emoji === '‚úÖ' ? '#2ecc71' : '#e74c3c';
            feedback.classList.add('show');
            
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 600);
        }
        
        // ========== ⁄©ŸÖÿ®Ÿà ==========
        function showCombo() {
            const comboBadge = document.getElementById('comboBadge');
            document.getElementById('comboCount').textContent = gameState.combo;
            comboBadge.classList.remove('hidden');
        }
        
        function hideCombo() {
            document.getElementById('comboBadge').classList.add('hidden');
        }
        
        // ========== ÿ™ŸàŸÇŸÅ ÿ®ÿßÿ≤€å ==========
        function pauseGame() {
            if (confirm('ÿ¢€åÿß ŸÖ€å‚ÄåÿÆŸàÿß€å ÿ®ÿßÿ≤€å ÿ±Ÿà ŸÖÿ™ŸàŸÇŸÅ ⁄©ŸÜ€åÿü')) {
                endGame();
            }
        }
        
        // ========== ÿß€åŸÜÿ™ÿ± ÿ®ÿ±ÿß€å ÿ´ÿ®ÿ™ ==========
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });
        // ========== Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å ==========
        function endGame() {
            if (gameState.fuelTimer) {
                clearInterval(gameState.fuelTimer);
            }
            
            gameState.isPlaying = false;
            gameState.totalGames++;
            
            // ÿ®ÿ±ÿ±ÿ≥€å ÿ±⁄©Ÿàÿ±ÿØ
            let isNewRecord = false;
            if (gameState.altitude > gameState.bestAltitude) {
                gameState.bestAltitude = gameState.altitude;
                isNewRecord = true;
            }
            
            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ≥⁄©Ÿá
            let coinReward = Math.floor(gameState.score / 10);
            if (isNewRecord) coinReward += 100;
            if (gameState.combo >= 10) coinReward += 50;
            if (gameState.combo >= 20) coinReward += 150;
            
            const level = gameLevels[gameState.currentLevel];
            coinReward = Math.floor(coinReward * level.coinMultiplier);
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿ≥⁄©Ÿá
            if (level.coinMultiplier > 0) {
                gameState.coins += coinReward;
            }
            
            // ÿ∞ÿÆ€åÿ±Ÿá
            saveGameData();
            
            // ŸÜŸÖÿß€åÿ¥ Modal
            showGameOverModal(coinReward, isNewRecord);
        }
        
        // ========== ŸÜŸÖÿß€åÿ¥ Modal Ÿæÿß€åÿßŸÜ ==========
        function showGameOverModal(coinReward, isNewRecord) {
            const modal = document.getElementById('gameOverModal');
            
            // ÿ¢€å⁄©ŸàŸÜ Ÿà ÿπŸÜŸàÿßŸÜ
            if (isNewRecord) {
                document.getElementById('gameOverIcon').textContent = 'üèÜ';
                document.getElementById('gameOverTitle').textContent = 'ÿ±⁄©Ÿàÿ±ÿØ ÿ¨ÿØ€åÿØ! üéâ';
                document.getElementById('gameOverSubtitle').textContent = 'ÿπÿßŸÑ€å ÿ®ŸàÿØ!';
            } else if (gameState.altitude >= 1000) {
                document.getElementById('gameOverIcon').textContent = 'üéÆ';
                document.getElementById('gameOverTitle').textContent = 'ÿπŸÖŸÑ⁄©ÿ±ÿØ ŸÅŸàŸÇ‚ÄåÿßŸÑÿπÿßÿØŸá!';
                document.getElementById('gameOverSubtitle').textContent = 'ÿ®Ÿá ÿß€åŸÜ ŸÖ€å⁄ØŸÜ ÿßÿ≥ÿ™ÿßÿØ!';
            } else if (gameState.altitude >= 500) {
                document.getElementById('gameOverIcon').textContent = 'üòé';
                document.getElementById('gameOverTitle').textContent = 'ÿÆŸàÿ® ÿ®ŸàÿØ!';
                document.getElementById('gameOverSubtitle').textContent = 'ÿØÿßÿ±€å ÿ®Ÿáÿ™ÿ± ŸÖ€åÿ¥€å!';
            } else {
                document.getElementById('gameOverIcon').textContent = 'üéÆ';
                document.getElementById('gameOverTitle').textContent = 'ÿ®ÿßÿ≤€å ÿ™ŸÖÿßŸÖ ÿ¥ÿØ!';
                document.getElementById('gameOverSubtitle').textContent = 'ÿßÿØÿßŸÖŸá ÿ®ÿØŸáÿå ÿ®Ÿáÿ™ÿ± ŸÖ€åÿ¥€å!';
            }
            
            // ÿ¢ŸÖÿßÿ±
            document.getElementById('finalAltitude').textContent = gameState.altitude + ' ŸÖÿ™ÿ±';
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalCorrect').textContent = gameState.correctAnswers;
            document.getElementById('finalWrong').textContent = gameState.wrongAnswers;
            
            // ŸæÿßÿØÿßÿ¥ ÿ≥⁄©Ÿá
            document.getElementById('coinReward').textContent = `üí∞ +${coinReward} ÿ≥⁄©Ÿá`;
            
            // ŸÖÿØÿßŸÑ‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ
            if (newMedalsThisGame.length > 0) {
                document.getElementById('newMedalNotif').classList.remove('hidden');
                const medalsList = document.getElementById('newMedalsList');
                medalsList.innerHTML = '';
                
                newMedalsThisGame.forEach(medal => {
                    const span = document.createElement('span');
                    span.className = 'new-medal-item';
                    span.textContent = medal.icon;
                    medalsList.appendChild(span);
                });
            } else {
                document.getElementById('newMedalNotif').classList.add('hidden');
            }
            
            modal.classList.remove('hidden');
            hideCombo();
        }
        
        // ========== ÿ¥ÿ±Ÿàÿπ ÿØŸàÿ®ÿßÿ±Ÿá ==========
        function restartGame() {
            document.getElementById('gameOverModal').classList.add('hidden');
            document.getElementById('rocket').style.bottom = '0px';
            startGame(gameState.currentLevel);
        }
        
        // ========== ŸÖŸÇÿØÿßÿ±ÿØŸá€å ÿßŸàŸÑ€åŸá ==========
        function init() {
            console.log('üöÄ ÿ®ÿßÿ≤€å ŸÖŸàÿ¥⁄© ÿ±€åÿßÿ∂€å ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...');
            
            // ŸÜŸÖÿß€åÿ¥ ŸÑŸàÿØ€åŸÜ⁄Ø
            const loading = document.getElementById('loadingScreen');
            if (loading) loading.classList.remove('hidden');
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿØ€åÿ™ÿß
            loadGameData();
            
            // ÿ≥ÿßÿÆÿ™ ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåŸáÿß
            createStars();
            
            // ÿ¢ŸæÿØ€åÿ™ ŸÖŸÜŸà
            updateMainMenuStats();
            
            // ŸæŸÜŸáÿßŸÜ ⁄©ÿ±ÿØŸÜ ŸÑŸàÿØ€åŸÜ⁄Ø
            setTimeout(() => {
                if (loading) loading.classList.add('hidden');
                console.log('‚úÖ ÿ®ÿßÿ≤€å ÿ¢ŸÖÿßÿØŸá ÿßÿ≥ÿ™!');
            }, 1000);
        }
        
        // ========== ÿßÿ¨ÿ±ÿß ==========
        window.addEventListener('load', init);
        
        // ========== ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿ±ŸÅÿ±ÿ¥ ÿ™ÿµÿßÿØŸÅ€å ==========
        window.addEventListener('beforeunload', function (e) {
            if (gameState.isPlaying) {
                e.preventDefault();
                e.returnValue = '';
                return 'ÿ®ÿßÿ≤€å ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ¨ÿ±ÿßÿ≥ÿ™. ŸÖÿ∑ŸÖÿ¶ŸÜ€å ŸÖ€åÿÆŸàÿß€å ÿÆÿßÿ±ÿ¨ ÿ®ÿ¥€åÿü';
            }
        });
        
        // ========== ŸÑÿß⁄Ø ÿ®ÿ±ÿß€å ÿØ€åÿ®ÿß⁄Ø ==========
        console.log('%cüöÄ ÿ®ÿßÿ≤€å ŸÖŸàÿ¥⁄© ÿ±€åÿßÿ∂€å', 'font-size: 24px; color: #667eea; font-weight: bold;');
        console.log('%cŸÜÿ≥ÿÆŸá 1.0.0', 'font-size: 14px; color: #7f8c8d;');
        console.log('%cÿ≥ÿßÿÆÿ™Ÿá ÿ¥ÿØŸá ÿ®ÿß ‚ù§Ô∏è', 'font-size: 14px; color: #e74c3c;');
    </script>
</body>
</html>
