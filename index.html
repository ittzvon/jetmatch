<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø§Ø²ÛŒ Ù…ÙˆØ´Ú© Ø±ÛŒØ§Ø¶ÛŒ - Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆÛŒÛŒ Ø¯Ø± ÙØ¶Ø§</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(to bottom, #0a0e27 0%, #1a1f3a 50%, #2a1f3a 100%);
overflow: hidden;
height: 100vh;
}

.stars {
position: fixed;
width: 100%;
height: 100%;
z-index: 0;
}

.star {
position: absolute;
width: 2px;
height: 2px;
background: white;
border-radius: 50%;
animation: twinkle 3s infinite;
}

@keyframes twinkle {
0%, 100% { opacity: 0.3; }
50% { opacity: 1; }
}

/* Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ ÙØ¶Ø§ÛŒÛŒ */
.space-object {
position: absolute;
font-size: 30px;
animation: floatSpace 15s ease-in-out infinite;
pointer-events: none;
}

@keyframes floatSpace {
0%, 100% { transform: translate(0, 0) rotate(0deg); }
25% { transform: translate(30px, -30px) rotate(90deg); }
50% { transform: translate(-20px, 20px) rotate(180deg); }
75% { transform: translate(20px, 30px) rotate(270deg); }
}

.shooting-star {
position: absolute;
width: 3px;
height: 3px;
background: white;
border-radius: 50%;
box-shadow: 0 0 10px 2px white;
animation: shootingStar 3s linear infinite;
}

@keyframes shootingStar {
0% {
transform: translate(0, 0);
opacity: 1;
}
100% {
transform: translate(-300px, 300px);
opacity: 0;
}
}

/* ØµÙØ­Ù‡ Ù…Ù†Ùˆ */
.menu-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
display: flex;
justify-content: center;
align-items: center;
z-index: 100;
}

.menu-container {
background: rgba(255, 255, 255, 0.95);
border-radius: 30px;
padding: 40px;
max-width: 600px;
width: 90%;
text-align: center;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.game-title {
font-size: 48px;
font-weight: bold;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
margin-bottom: 10px;
}

.game-subtitle {
font-size: 20px;
color: #7f8c8d;
margin-bottom: 30px;
}

.rocket-icon {
font-size: 80px;
margin: 20px 0;
animation: floatRocket 3s ease-in-out infinite;
}

@keyframes floatRocket {
0%, 100% { transform: translateY(0px); }
50% { transform: translateY(-20px); }
}

.level-buttons {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 15px;
margin: 20px 0;
}

.level-btn {
background: white;
border: 3px solid #3498db;
padding: 20px;
border-radius: 15px;
cursor: pointer;
transition: all 0.3s;
font-size: 16px;
font-weight: bold;
}

.level-btn:hover {
transform: translateY(-5px);
box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
}

.level-btn.easy {
border-color: #2ecc71;
background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
}

.level-btn.medium {
border-color: #f39c12;
background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
}

.level-btn.hard {
border-color: #e74c3c;
background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
}

.level-btn.expert {
border-color: #9b59b6;
background: linear-gradient(135deg, #e8daef 0%, #d7bde2 100%);
}

.level-icon {
font-size: 32px;
display: block;
margin-bottom: 8px;
}

.level-title {
font-size: 18px;
color: #2c3e50;
}

.level-desc {
font-size: 12px;
color: #7f8c8d;
margin-top: 5px;
}

/* Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§ */
.medals-section {
margin-top: 20px;
padding: 20px;
background: #f8f9fa;
border-radius: 15px;
}

.medals-title {
font-size: 16px;
font-weight: bold;
color: #2c3e50;
margin-bottom: 15px;
}

.medals-grid {
display: grid;
grid-template-columns: repeat(4, 1fr);
gap: 10px;
}

.medal-item {
text-align: center;
padding: 10px;
background: white;
border-radius: 10px;
border: 2px solid #e0e0e0;
}

.medal-item.unlocked {
border-color: #ffd700;
box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

.medal-item.locked {
opacity: 0.3;
}

.medal-icon {
font-size: 32px;
margin-bottom: 5px;
}

.medal-name {
font-size: 10px;
color: #7f8c8d;
}

.hidden {
display: none !important;
}
/* ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ */
.game-container {
position: relative;
width: 100%;
height: 100vh;
display: flex;
flex-direction: column;
align-items: center;
z-index: 1;
}

.top-bar {
width: 100%;
display: flex;
justify-content: space-between;
align-items: center;
padding: 20px;
}

.back-btn {
background: rgba(255, 255, 255, 0.2);
border: 2px solid rgba(255, 255, 255, 0.3);
color: white;
padding: 10px 20px;
border-radius: 10px;
cursor: pointer;
font-size: 16px;
font-weight: bold;
transition: all 0.3s;
backdrop-filter: blur(10px);
}

.back-btn:hover {
background: rgba(255, 255, 255, 0.3);
transform: scale(1.05);
}

.score-board {
background: rgba(255, 255, 255, 0.1);
backdrop-filter: blur(10px);
border-radius: 20px;
padding: 15px 30px;
display: flex;
gap: 20px;
border: 2px solid rgba(255, 255, 255, 0.2);
}

.stat {
text-align: center;
color: white;
}

.stat-label {
font-size: 12px;
opacity: 0.8;
margin-bottom: 5px;
}

.stat-value {
font-size: 24px;
font-weight: bold;
}

.rocket-container {
position: relative;
width: 400px;
height: 350px;
margin: 10px 0;
}

.rocket {
position: absolute;
bottom: 0;
left: 50%;
transform: translateX(-50%);
font-size: 60px;
transition: bottom 0.5s ease;
filter: drop-shadow(0 0 20px rgba(255, 100, 100, 0.5));
}

.fire {
position: absolute;
bottom: -30px;
left: 50%;
transform: translateX(-50%);
font-size: 40px;
animation: fireFlicker 0.1s infinite;
}

@keyframes fireFlicker {
0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
50% { opacity: 0.8; transform: translateX(-50%) scale(1.1); }
}

.planets {
position: absolute;
width: 100%;
height: 100%;
pointer-events: none;
}

.planet {
position: absolute;
font-size: 40px;
animation: rotatePlanet 20s linear infinite;
}

@keyframes rotatePlanet {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}

.fuel-bar-container {
width: 100%;
max-width: 500px;
margin: 10px 20px;
}

.fuel-label {
color: white;
text-align: center;
margin-bottom: 10px;
font-size: 18px;
font-weight: bold;
}

.fuel-bar {
width: 100%;
height: 35px;
background: rgba(255, 255, 255, 0.1);
border-radius: 20px;
overflow: hidden;
border: 3px solid rgba(255, 255, 255, 0.3);
position: relative;
}

.fuel-fill {
height: 100%;
background: linear-gradient(90deg, #2ecc71, #27ae60);
transition: width 0.3s ease, background 0.3s ease;
border-radius: 20px;
box-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
}

.fuel-text {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
color: white;
font-weight: bold;
font-size: 14px;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.question-container {
background: rgba(255, 255, 255, 0.95);
border-radius: 20px;
padding: 25px;
max-width: 500px;
width: 90%;
text-align: center;
box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.level-badge {
display: inline-block;
padding: 8px 16px;
border-radius: 20px;
font-weight: bold;
font-size: 14px;
margin-bottom: 15px;
}

.question {
font-size: 36px;
font-weight: bold;
color: #2c3e50;
margin-bottom: 20px;
}

.answer-input {
width: 100%;
padding: 15px;
font-size: 24px;
text-align: center;
border: 3px solid #3498db;
border-radius: 10px;
margin-bottom: 15px;
outline: none;
}

.answer-input:focus {
border-color: #2ecc71;
box-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
}

.submit-btn {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
padding: 15px 40px;
font-size: 18px;
font-weight: bold;
border-radius: 10px;
cursor: pointer;
transition: transform 0.2s;
}

.submit-btn:hover {
transform: scale(1.05);
}

.submit-btn:active {
transform: scale(0.95);
}

.feedback {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
font-size: 100px;
font-weight: bold;
z-index: 1000;
opacity: 0;
transition: opacity 0.3s;
text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
}

.feedback.show {
opacity: 1;
animation: feedbackPop 0.5s ease;
}

@keyframes feedbackPop {
0% { transform: translate(-50%, -50%) scale(0); }
50% { transform: translate(-50%, -50%) scale(1.2); }
100% { transform: translate(-50%, -50%) scale(1); }
}
/* ØµÙØ­Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ */
.game-over {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.9);
display: none;
justify-content: center;
align-items: center;
z-index: 2000;
}

.game-over.show {
display: flex;
}

.game-over-content {
background: white;
padding: 40px;
border-radius: 20px;
text-align: center;
max-width: 500px;
width: 90%;
}

.game-over-title {
font-size: 36px;
margin-bottom: 10px;
color: #2c3e50;
}

.game-over-icon {
font-size: 80px;
margin: 20px 0;
}

.final-stats {
background: #f8f9fa;
padding: 20px;
border-radius: 15px;
margin: 20px 0;
}

.stat-row {
display: flex;
justify-content: space-between;
margin: 10px 0;
font-size: 18px;
}

.stat-row strong {
color: #3498db;
}

.new-medal-alert {
background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
padding: 15px;
border-radius: 10px;
margin: 15px 0;
animation: medalShine 1s ease infinite;
}

@keyframes medalShine {
0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
}

.new-medal-text {
font-size: 20px;
font-weight: bold;
color: #2c3e50;
margin-bottom: 10px;
}

.buttons-row {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

.restart-btn, .menu-btn {
flex: 1;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
padding: 15px 20px;
font-size: 16px;
font-weight: bold;
border-radius: 10px;
cursor: pointer;
}

.menu-btn {
background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
}

/* Ú©Ù…Ø¨Ùˆ */
.combo-badge {
position: fixed;
top: 120px;
right: 20px;
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
color: white;
padding: 15px 25px;
border-radius: 15px;
font-size: 24px;
font-weight: bold;
z-index: 100;
box-shadow: 0 5px 20px rgba(245, 87, 108, 0.5);
animation: comboPulse 0.5s ease;
}

@keyframes comboPulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.1); }
}

/* Ù¾Ø§Ù¾ Ø¢Ù¾ Ù…Ø¯Ø§Ù„ */
.medal-popup {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%) scale(0);
background: white;
padding: 40px;
border-radius: 20px;
text-align: center;
z-index: 3000;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.medal-popup.show {
animation: medalPopup 0.5s ease forwards;
}

@keyframes medalPopup {
0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); }
50% { transform: translate(-50%, -50%) scale(1.1) rotate(10deg); }
100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

.medal-popup-icon {
font-size: 100px;
margin-bottom: 20px;
animation: medalRotate 2s ease infinite;
}

@keyframes medalRotate {
0%, 100% { transform: rotate(-10deg); }
50% { transform: rotate(10deg); }
}

.medal-popup-title {
font-size: 28px;
font-weight: bold;
color: #2c3e50;
margin-bottom: 10px;
}

.medal-popup-desc {
font-size: 16px;
color: #7f8c8d;
margin-bottom: 20px;
}

.medal-popup-btn {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
padding: 12px 30px;
font-size: 16px;
font-weight: bold;
border-radius: 10px;
cursor: pointer;
}

/* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
@media (max-width: 600px) {
.game-title { font-size: 32px; }
.rocket { font-size: 50px; }
.question { font-size: 28px; }
.level-buttons { grid-template-columns: 1fr 1fr; }
.medals-grid { grid-template-columns: repeat(4, 1fr); }
}
</style>
</head>
<body>
<div class="stars" id="stars"></div>

<!-- ØµÙØ­Ù‡ Ù…Ù†Ùˆ -->
<div class="menu-screen" id="menuScreen">
<div class="menu-container">
<div class="game-title">ğŸš€ Ù…ÙˆØ´Ú© Ø±ÛŒØ§Ø¶ÛŒ</div>
<div class="game-subtitle">Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆÛŒÛŒ Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ Ø§Ø¹Ø¯Ø§Ø¯!</div>
<div class="rocket-icon">ğŸš€</div>

<h3 style="margin: 20px 0; color: #2c3e50;">Ø³Ø·Ø­ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:</h3>

<div class="level-buttons">
<button class="level-btn easy" onclick="startGame('easy')">
<span class="level-icon">ğŸ˜Š</span>
<div class="level-title">Ø¢Ø³Ø§Ù†</div>
<div class="level-desc">ÙÙ‚Ø· Ø¬Ù…Ø¹ Ùˆ ØªÙØ±ÛŒÙ‚</div>
</button>

<button class="level-btn medium" onclick="startGame('medium')">
<span class="level-icon">ğŸ¤”</span>
<div class="level-title">Ù…ØªÙˆØ³Ø·</div>
<div class="level-desc">Ø¬Ù…Ø¹ØŒ ØªÙØ±ÛŒÙ‚ Ùˆ Ø¶Ø±Ø¨</div>
</button>

<button class="level-btn hard" onclick="startGame('hard')">
<span class="level-icon">ğŸ˜</span>
<div class="level-title">Ø³Ø®Øª</div>
<div class="level-desc">Ù‡Ù…Ù‡ Ø¹Ù…Ù„ÛŒØ§Øª</div>
</button>

<button class="level-btn expert" onclick="startGame('expert')">
<span class="level-icon">ğŸ”¥</span>
<div class="level-title">Ø§Ø³ØªØ§Ø¯</div>
<div class="level-desc">ÙÙˆÙ‚ Ø³Ø±ÛŒØ¹!</div>
</button>
</div>

<div class="medals-section">
<div class="medals-title">ğŸ† Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ù†</div>
<div class="medals-grid" id="medalsGrid"></div>
</div>

<div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
<div style="font-size: 14px; color: #7f8c8d;">
<strong>Ø±Ú©ÙˆØ±Ø¯ Ø´Ù…Ø§:</strong> <span id="menuHighscore" style="color: #3498db; font-size: 20px;">0</span> Ù…ØªØ±
</div>
</div>
</div>
</div>
<!-- ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ -->
<div class="game-container hidden" id="gameContainer">
<div class="top-bar">
<button class="back-btn" onclick="backToMenu()">â†©ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆ</button>

<div class="score-board">
<div class="stat">
<div class="stat-label">Ø§Ù…ØªÛŒØ§Ø²</div>
<div class="stat-value" id="score">0</div>
</div>
<div class="stat">
<div class="stat-label">Ø§Ø±ØªÙØ§Ø¹</div>
<div class="stat-value" id="altitude">0</div>
</div>
<div class="stat">
<div class="stat-label">Ø±Ú©ÙˆØ±Ø¯</div>
<div class="stat-value" id="highscore">0</div>
</div>
</div>
</div>

<div class="rocket-container">
<div class="planets" id="planets"></div>
<div class="rocket" id="rocket">
ğŸš€
<div class="fire" id="fire">ğŸ”¥</div>
</div>
</div>

<div class="fuel-bar-container">
<div class="fuel-label">â›½ Ø³ÙˆØ®Øª: <span id="fuelTime">20</span> Ø«Ø§Ù†ÛŒÙ‡</div>
<div class="fuel-bar">
<div class="fuel-fill" id="fuelFill"></div>
<div class="fuel-text" id="fuelPercent">100%</div>
</div>
</div>

<div class="question-container">
<div class="level-badge" id="levelBadge">Ø¢Ø³Ø§Ù†</div>
<div class="question" id="question">8 Ã— 7 = ?</div>
<input type="number" class="answer-input" id="answerInput" placeholder="Ù¾Ø§Ø³Ø®Øª Ø±Ùˆ Ø¨Ù†ÙˆÛŒØ³">
<button class="submit-btn" onclick="checkAnswer()">âœ… Ø«Ø¨Øª Ù¾Ø§Ø³Ø®</button>
</div>
</div>

<div class="feedback" id="feedback"></div>

<!-- ØµÙØ­Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ -->
<div class="game-over" id="gameOver">
<div class="game-over-content">
<div class="game-over-icon" id="gameOverIcon">ğŸ®</div>
<div class="game-over-title" id="gameOverTitle">Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯!</div>

<div id="newMedalAlert" class="new-medal-alert hidden">
<div class="new-medal-text">ğŸ‰ Ù…Ø¯Ø§Ù„ Ø¬Ø¯ÛŒØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒ!</div>
<div id="newMedalsList"></div>
</div>

<div class="final-stats">
<div class="stat-row">
<span>Ø§Ø±ØªÙØ§Ø¹ Ù†Ù‡Ø§ÛŒÛŒ:</span>
<strong id="finalAltitude">0 Ù…ØªØ±</strong>
</div>
<div class="stat-row">
<span>Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„:</span>
<strong id="finalScore">0</strong>
</div>
<div class="stat-row">
<span>Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª:</span>
<strong id="correctAnswers">0</strong>
</div>
<div class="stat-row">
<span>Ù¾Ø§Ø³Ø® ØºÙ„Ø·:</span>
<strong id="wrongAnswers">0</strong>
</div>
</div>

<div class="buttons-row">
<button class="restart-btn" onclick="restartGame()">ğŸ”„ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø§Ø²ÛŒ Ú©Ù†</button>
<button class="menu-btn" onclick="backToMenu()">ğŸ  Ø¨Ø±Ùˆ Ø¨Ù‡ Ù…Ù†Ùˆ</button>
</div>
</div>
</div>

<!-- Ù¾Ø§Ù¾ Ø¢Ù¾ Ù…Ø¯Ø§Ù„ -->
<div class="medal-popup" id="medalPopup">
<div class="medal-popup-icon" id="medalPopupIcon">ğŸ…</div>
<div class="medal-popup-title" id="medalPopupTitle">Ù…Ø¯Ø§Ù„ Ø¬Ø¯ÛŒØ¯!</div>
<div class="medal-popup-desc" id="medalPopupDesc">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø¯Ø§Ù„</div>
<button class="medal-popup-btn" onclick="closeMedalPopup()">Ø¹Ø§Ù„ÛŒ! ğŸ‰</button>
</div>

<script>
// Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
let score = 0;
let altitude = 0;
let currentFuel = 20;
let maxFuel = 20;
let currentQuestion = {};
let fuelTimer;
let highscore = localStorage.getItem('rocketHighScore') || 0;
let currentLevel = 'easy';
let correctCount = 0;
let wrongCount = 0;
let combo = 0;
let comboElement = null;
let medals = JSON.parse(localStorage.getItem('rocketMedals')) || {};
let newMedalsThisGame = [];

// ØªØ¹Ø±ÛŒÙ Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§
const allMedals = {
firstWin: { icon: 'ğŸŒŸ', name: 'Ø§ÙˆÙ„ÛŒÙ† Ù¾Ø±ÙˆØ§Ø²', desc: 'Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø²ÛŒØª Ø±Ùˆ ØªÙ…ÙˆÙ… Ú©Ø±Ø¯ÛŒ!', condition: () => true },
altitude100: { icon: 'ğŸ¯', name: 'ØµØ¯ Ù…ØªØ±ÛŒ', desc: 'Ø¨Ù‡ Ø§Ø±ØªÙØ§Ø¹ 100 Ù…ØªØ± Ø±Ø³ÛŒØ¯ÛŒ', condition: () => altitude >= 100 },
altitude500: { icon: 'ğŸš', name: 'Ù¾Ø§Ù†ØµØ¯ Ù…ØªØ±ÛŒ', desc: 'Ø¨Ù‡ Ø§Ø±ØªÙØ§Ø¹ 500 Ù…ØªØ± Ø±Ø³ÛŒØ¯ÛŒ', condition: () => altitude >= 500 },
altitude1000: { icon: 'âœˆï¸', name: 'Ù‡Ø²Ø§Ø± Ù…ØªØ±ÛŒ', desc: 'Ø¨Ù‡ Ø§Ø±ØªÙØ§Ø¹ 1000 Ù…ØªØ± Ø±Ø³ÛŒØ¯ÛŒ', condition: () => altitude >= 1000 },
altitude2000: { icon: 'ğŸ›¸', name: 'Ø¯Ùˆ Ù‡Ø²Ø§Ø± Ù…ØªØ±ÛŒ', desc: 'Ø¨Ù‡ Ø§Ø±ØªÙØ§Ø¹ 2000 Ù…ØªØ± Ø±Ø³ÛŒØ¯ÛŒ', condition: () => altitude >= 2000 },
combo5: { icon: 'ğŸ”¥', name: 'Ú©Ù…Ø¨Ùˆ 5', desc: '5 Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª Ù¾Ø´Øª Ø³Ø± Ù‡Ù…!', condition: () => combo >= 5 },
combo10: { icon: 'âš¡', name: 'Ú©Ù…Ø¨Ùˆ 10', desc: '10 Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª Ù¾Ø´Øª Ø³Ø± Ù‡Ù…!', condition: () => combo >= 10 },
perfect10: { icon: 'ğŸ’¯', name: 'Ú©Ø§Ù…Ù„', desc: '10 Ø³ÙˆØ§Ù„ Ø¯Ø±Ø³Øª Ø¨Ø¯ÙˆÙ† ØºÙ„Ø·', condition: () => correctCount >= 10 && wrongCount === 0 },
hardLevel: { icon: 'ğŸ˜', name: 'Ø³Ø®Øª Ø±Ùˆ Ø±ÙØªÛŒ', desc: 'Ø³Ø·Ø­ Ø³Ø®Øª Ø±Ùˆ ØªÙ…ÙˆÙ… Ú©Ø±Ø¯ÛŒ', condition: () => currentLevel === 'hard' },
expertLevel: { icon: 'ğŸ†', name: 'Ø§Ø³ØªØ§Ø¯', desc: 'Ø³Ø·Ø­ Ø§Ø³ØªØ§Ø¯ Ø±Ùˆ ØªÙ…ÙˆÙ… Ú©Ø±Ø¯ÛŒ', condition: () => currentLevel === 'expert' },
mathGenius: { icon: 'ğŸ§®', name: 'Ù†Ø§Ø¨ØºÙ‡ Ø±ÛŒØ§Ø¶ÛŒ', desc: '50 Ø³ÙˆØ§Ù„ Ø¯Ø±Ø³Øª', condition: () => correctCount >= 50 },
speedster: { icon: 'âš¡', name: 'Ø³Ø±ÛŒØ¹', desc: 'Ø³ÙˆØ®Øª Ø¨ÛŒØ´ Ø§Ø² 15 Ø«Ø§Ù†ÛŒÙ‡ Ø¯Ø§Ø´ØªÛŒ', condition: () => currentFuel > 15 }
};
// ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø·ÙˆØ­
const levelConfig = {
easy: {
name: 'Ø¢Ø³Ø§Ù† ğŸ˜Š',
operations: ['+', '-'],
maxNum: 20,
minNum: 1,
color: '#2ecc71',
initialFuel: 25,
fuelBonus: 20,
fuelPenalty: 2
},
medium: {
name: 'Ù…ØªÙˆØ³Ø· ğŸ¤”',
operations: ['+', '-', 'Ã—'],
maxNum: 50,
minNum: 10,
color: '#f39c12',
initialFuel: 20,
fuelBonus: 18,
fuelPenalty: 3
},
hard: {
name: 'Ø³Ø®Øª ğŸ˜',
operations: ['+', '-', 'Ã—', 'Ã·'],
maxNum: 99,
minNum: 10,
color: '#e74c3c',
initialFuel: 18,
fuelBonus: 15,
fuelPenalty: 4
},
expert: {
name: 'Ø§Ø³ØªØ§Ø¯ ğŸ”¥',
operations: ['+', '-', 'Ã—', 'Ã·'],
maxNum: 99,
minNum: 10,
color: '#9b59b6',
initialFuel: 15,
fuelBonus: 12,
fuelPenalty: 5
}
};

document.getElementById('menuHighscore').textContent = highscore;

// Ø³Ø§Ø®Øª Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§
function createStars() {
const starsContainer = document.getElementById('stars');
for (let i = 0; i < 100; i++) {
const star = document.createElement('div');
star.className = 'star';
star.style.left = Math.random() * 100 + '%';
star.style.top = Math.random() * 100 + '%';
star.style.animationDelay = Math.random() * 3 + 's';
starsContainer.appendChild(star);
}

// Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ù†Ø¨Ø§Ù„Ù‡â€ŒØ¯Ø§Ø±
for (let i = 0; i < 3; i++) {
setTimeout(() => {
const shootingStar = document.createElement('div');
shootingStar.className = 'shooting-star';
shootingStar.style.left = Math.random() * 100 + '%';
shootingStar.style.top = Math.random() * 50 + '%';
starsContainer.appendChild(shootingStar);

setTimeout(() => shootingStar.remove(), 3000);
}, i * 5000);
}
}

// Ø³Ø§Ø®Øª Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ ÙØ¶Ø§ÛŒÛŒ
function createSpaceObjects() {
const container = document.getElementById('planets');
container.innerHTML = '';

const spaceObjects = ['ğŸª', 'ğŸŒ', 'ğŸŒ™', 'â˜„ï¸', 'ğŸ›¸', 'ğŸ‘½', 'ğŸŒŸ', 'ğŸ’«'];

for (let i = 0; i < 6; i++) {
const obj = document.createElement('div');
obj.className = 'space-object';
obj.textContent = spaceObjects[Math.floor(Math.random() * spaceObjects.length)];
obj.style.left = Math.random() * 80 + 10 + '%';
obj.style.top = Math.random() * 70 + 10 + '%';
obj.style.animationDelay = Math.random() * 5 + 's';
obj.style.animationDuration = (10 + Math.random() * 10) + 's';
container.appendChild(obj);
}
}

// Ù†Ù…Ø§ÛŒØ´ Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§ Ø¯Ø± Ù…Ù†Ùˆ
function displayMedals() {
const medalsGrid = document.getElementById('medalsGrid');
medalsGrid.innerHTML = '';

Object.keys(allMedals).forEach(key => {
const medal = allMedals[key];
const isUnlocked = medals[key] === true;

const medalDiv = document.createElement('div');
medalDiv.className = `medal-item ${isUnlocked ? 'unlocked' : 'locked'}`;
medalDiv.innerHTML = `
<div class="medal-icon">${medal.icon}</div>
<div class="medal-name">${medal.name}</div>
`;

if (isUnlocked) {
medalDiv.title = medal.desc;
} else {
medalDiv.title = 'ğŸ”’ Ù‚ÙÙ„ Ø´Ø¯Ù‡';
}

medalsGrid.appendChild(medalDiv);
});
}

// Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§
function checkMedals() {
newMedalsThisGame = [];

Object.keys(allMedals).forEach(key => {
if (!medals[key] && allMedals[key].condition()) {
medals[key] = true;
newMedalsThisGame.push(key);
showMedalPopup(key);
}
});

if (newMedalsThisGame.length > 0) {
localStorage.setItem('rocketMedals', JSON.stringify(medals));
}
}

// Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ù¾ Ø¢Ù¾ Ù…Ø¯Ø§Ù„
function showMedalPopup(medalKey) {
const medal = allMedals[medalKey];
const popup = document.getElementById('medalPopup');

document.getElementById('medalPopupIcon').textContent = medal.icon;
document.getElementById('medalPopupTitle').textContent = medal.name;
document.getElementById('medalPopupDesc').textContent = medal.desc;

popup.classList.add('show');

setTimeout(() => {
popup.classList.remove('show');
}, 3000);
}

// Ø¨Ø³ØªÙ† Ù¾Ø§Ù¾ Ø¢Ù¾ Ù…Ø¯Ø§Ù„
function closeMedalPopup() {
document.getElementById('medalPopup').classList.remove('show');
}

// Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
function startGame(level) {
currentLevel = level;
const config = levelConfig[level];

score = 0;
altitude = 0;
correctCount = 0;
wrongCount = 0;
combo = 0;
newMedalsThisGame = [];
currentFuel = config.initialFuel;
maxFuel = config.initialFuel;

document.getElementById('menuScreen').classList.add('hidden');
document.getElementById('gameContainer').classList.remove('hidden');
document.getElementById('highscore').textContent = highscore;
document.getElementById('levelBadge').textContent = config.name;
document.getElementById('levelBadge').style.background = config.color;
document.getElementById('levelBadge').style.color = 'white';

createSpaceObjects();
updateUI();
generateQuestion();
startFuelTimer();
}

// ØªÙˆÙ„ÛŒØ¯ Ø³ÙˆØ§Ù„
function generateQuestion() {
const config = levelConfig[currentLevel];
const operation = config.operations[Math.floor(Math.random() * config.operations.length)];

let num1, num2, answer;

if (operation === '+') {
num1 = Math.floor(Math.random() * (config.maxNum - config.minNum)) + config.minNum;
num2 = Math.floor(Math.random() * 9) + 1;
answer = num1 + num2;
} else if (operation === '-') {
num1 = Math.floor(Math.random() * (config.maxNum - config.minNum)) + config.minNum;
num2 = Math.floor(Math.random() * Math.min(num1, 9)) + 1;
answer = num1 - num2;
} else if (operation === 'Ã—') {
num1 = Math.floor(Math.random() * (config.maxNum - config.minNum)) + config.minNum;
num2 = Math.floor(Math.random() * 9) + 1;
answer = num1 * num2;
} else {
num2 = Math.floor(Math.random() * 9) + 1;
answer = Math.floor(Math.random() * 20) + 1;
num1 = num2 * answer;
}

currentQuestion = { num1, num2, operation, answer };
document.getElementById('question').textContent = `${num1} ${operation} ${num2} = ?`;
document.getElementById('answerInput').value = '';
document.getElementById('answerInput').focus();
}
// Ù†Ù…Ø§ÛŒØ´ Ú©Ù…Ø¨Ùˆ
function showCombo() {
if (combo >= 3) {
if (comboElement) {
comboElement.remove();
}
comboElement = document.createElement('div');
comboElement.className = 'combo-badge';
comboElement.textContent = `ğŸ”¥ Ú©Ù…Ø¨Ùˆ ${combo}`;
document.body.appendChild(comboElement);

setTimeout(() => {
if (comboElement) {
comboElement.remove();
comboElement = null;
}
}, 2000);
}
}

// Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®
function checkAnswer() {
const userAnswer = parseInt(document.getElementById('answerInput').value);
const config = levelConfig[currentLevel];

if (isNaN(userAnswer)) {
return;
}

const feedback = document.getElementById('feedback');

if (userAnswer === currentQuestion.answer) {
feedback.textContent = ['âœ…', 'ğŸ‰', 'ğŸ‘', 'â­', 'ğŸŒŸ', 'ğŸ’«'][Math.floor(Math.random() * 6)];
feedback.style.color = '#2ecc71';
feedback.classList.add('show');

score += 10 + (combo * 2);
altitude += 100;
correctCount++;
combo++;
currentFuel = Math.min(currentFuel + config.fuelBonus, maxFuel);

updateRocketPosition();
showCombo();
checkMedals();

} else {
feedback.textContent = 'âŒ';
feedback.style.color = '#e74c3c';
feedback.classList.add('show');

wrongCount++;
combo = 0;
maxFuel = Math.max(maxFuel - config.fuelPenalty, 5);
currentFuel = Math.min(currentFuel, maxFuel);

if (comboElement) {
comboElement.remove();
comboElement = null;
}
}

setTimeout(() => {
feedback.classList.remove('show');
}, 500);

updateUI();
generateQuestion();
}

// Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…ÙˆØ´Ú©
function updateRocketPosition() {
const rocket = document.getElementById('rocket');
const maxHeight = 300;
const newBottom = Math.min((altitude / 10), maxHeight);
rocket.style.bottom = newBottom + 'px';
}

// Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ
function updateUI() {
document.getElementById('score').textContent = score;
document.getElementById('altitude').textContent = altitude;
document.getElementById('fuelTime').textContent = currentFuel;

const fuelPercent = (currentFuel / maxFuel) * 100;
document.getElementById('fuelFill').style.width = fuelPercent + '%';
document.getElementById('fuelPercent').textContent = Math.round(fuelPercent) + '%';

const fuelFill = document.getElementById('fuelFill');
if (fuelPercent > 50) {
fuelFill.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
} else if (fuelPercent > 25) {
fuelFill.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
} else {
fuelFill.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
}
}

// ØªØ§ÛŒÙ…Ø± Ø³ÙˆØ®Øª
function startFuelTimer() {
fuelTimer = setInterval(() => {
currentFuel--;
updateUI();

if (currentFuel <= 0) {
endGame();
}
}, 1000);
}

// Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
function endGame() {
clearInterval(fuelTimer);

checkMedals();

if (altitude > highscore) {
highscore = altitude;
localStorage.setItem('rocketHighScore', highscore);
document.getElementById('highscore').textContent = highscore;
document.getElementById('menuHighscore').textContent = highscore;
document.getElementById('gameOverIcon').textContent = 'ğŸ†';
document.getElementById('gameOverTitle').textContent = 'Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯! ğŸ‰';
} else {
document.getElementById('gameOverIcon').textContent = 'ğŸ®';
document.getElementById('gameOverTitle').textContent = 'Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯!';
}

document.getElementById('finalAltitude').textContent = altitude + ' Ù…ØªØ±';
document.getElementById('finalScore').textContent = score;
document.getElementById('correctAnswers').textContent = correctCount;
document.getElementById('wrongAnswers').textContent = wrongCount;

if (newMedalsThisGame.length > 0) {
const alert = document.getElementById('newMedalAlert');
alert.classList.remove('hidden');

const medalsList = document.getElementById('newMedalsList');
medalsList.innerHTML = '';
newMedalsThisGame.forEach(key => {
const medal = allMedals[key];
const span = document.createElement('span');
span.style.fontSize = '32px';
span.style.margin = '0 5px';
span.textContent = medal.icon;
medalsList.appendChild(span);
});
} else {
document.getElementById('newMedalAlert').classList.add('hidden');
}

document.getElementById('gameOver').classList.add('show');
displayMedals();
}

// Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡
function restartGame() {
document.getElementById('gameOver').classList.remove('show');
document.getElementById('rocket').style.bottom = '0px';
startGame(currentLevel);
}

// Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆ
function backToMenu() {
clearInterval(fuelTimer);
document.getElementById('gameOver').classList.remove('show');
document.getElementById('gameContainer').classList.add('hidden');
document.getElementById('menuScreen').classList.remove('hidden');
document.getElementById('rocket').style.bottom = '0px';
if (comboElement) {
comboElement.remove();
comboElement = null;
}
displayMedals();
}

// Ø§ÛŒÙ†ØªØ± Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù¾Ø§Ø³Ø®
document.getElementById('answerInput').addEventListener('keypress', function(e) {
if (e.key === 'Enter') {
checkAnswer();
}
});

// Ø´Ø±ÙˆØ¹
createStars();
displayMedals();

// ØªÙˆÙ„ÛŒØ¯ Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ù†Ø¨Ø§Ù„Ù‡â€ŒØ¯Ø§Ø± Ù…Ø¯Ø§ÙˆÙ…
setInterval(() => {
const shootingStar = document.createElement('div');
shootingStar.className = 'shooting-star';
shootingStar.style.left = Math.random() * 100 + '%';
shootingStar.style.top = Math.random() * 50 + '%';
document.getElementById('stars').appendChild(shootingStar);

setTimeout(() => shootingStar.remove(), 3000);
}, 8000);
</script>
</body>
</html>
